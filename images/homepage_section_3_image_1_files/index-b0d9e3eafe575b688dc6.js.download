define(["@dx/experiments","z-shop-event-bus","classnames","rendering-engine-api","react-dom","react"],(e,t,a,r,n,o)=>(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[45332],{3439:(e,t,a)=>{"use strict";let r;a.d(t,{U:()=>r}),function(e){e.OPEN="open",e.CLOSED="closed"}(r||(r={}))},4906:(e,t,a)=>{"use strict";let r;a.d(t,{U:()=>r}),function(e){e.OPEN="open",e.CLOSED="closed"}(r||(r={}))},5339:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(76119);const n=({tools:{executeMutation:e},id:t,name:a,entities:n})=>{const o=`updateBoard-${a}`,s={defaultLanguage:"und",translations:{text:a,language:"und"}};return e({...r,variables:{UpdateUserBoardInput:{id:t,name:s,entities:n,clientMutationId:o}}})}},6526:(e,t)=>{"use strict";t.Z=function(){return!Intl.Segmenter}},10870:()=>{window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"collection_board-creation-modal":["boards.saved.success","boards.saved.add.cta","boards.update.title.header","boards.create.title.header","boards.update.title.cta","boards.create.title.cta","boards.create.error","boards.edit.error","main.close","boards.saved.success.message.plural","boards.saved.success.cta.plural","boards.saved.success.message.singular","boards.saved.success.cta.singular","boards.saved.popup.select","boards.saved.popup.create","boards.saved.popup.done","board.info.popup.close.cta","board.info.popup.create.cta","board.info.popup.title","board.info.popup.description","label.close","boards.create.title.unsupported.error","boards.create.title.charlimit.error","boards.create.title.charlimit.short.error","boards.create.title.charlimit","board.a11y.boardtitlecharlimit.text","boards.create.title.placeholder","boards.creation.visibility.toggle.body","boards.create.title.cta.cancel","boards.saved.popup.item.plural","boards.saved.popup.item.singular"]}},11367:e=>{e.exports={id:"a2e7a9788533d6381b430068f6dfad86bdc3747b1d944910a9a69841a98c9da4"}},12280:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>d});var r=a(59890),n=a(34801),o=a(85959),s=a.n(o),l=a(4906);const i={style:{},status:l.U.CLOSED,value:null},c=(0,n.e)(e=>Object.assign({},i,{bus:new r.l},void 0!==(null==e?void 0:e.defaultValue)?{value:null==e?void 0:e.defaultValue}:{}),e=>{const{styles:t={},bus:a,closeToSwipeDirection:r,preventFocusTransfer:n}=e;return Object.assign({style:t,closeToSwipeDirection:r,preventFocusTransfer:n},void 0!==a?{bus:a}:{})})(e=>{const{defaultValue:t,initialStatus:a,context:{bus:r,setContext:n,value:i},children:c,onOpen:d,onChange:u,onClose:m,onBlur:p,onSubmit:f}=e;(0,o.useEffect)(()=>{void 0===a&&void 0===t||n(Object.assign({},void 0!==t?{value:t}:{},void 0!==a?{status:a}:{})),a===l.U.OPEN&&setTimeout(()=>{r.emit("open",{dontTrack:!0})},0)},[t,r]);const b=(0,o.useCallback)(e=>{"function"==typeof u&&u(e),n({value:e})},[u]),g=(0,o.useCallback)(()=>{"function"==typeof p&&p(i)},[i,p]),y=(0,o.useCallback)(e=>{"function"==typeof f&&f(e),n({value:e})},[f]),_=(0,o.useCallback)(({status:e,dontTrack:t})=>{e===l.U.OPEN?t||"function"!=typeof d||d(i):e!==l.U.CLOSED||t||"function"!=typeof m||m(i)},[i,d,m]);return(0,o.useEffect)(()=>(r.on("change",b),()=>{r.off("change",b)}),[r,b]),(0,o.useEffect)(()=>(r.on("blur",g),()=>{r.off("blur",g)}),[r,g]),(0,o.useEffect)(()=>(r.on("submit",y),()=>{r.off("submit",y)}),[r,y]),(0,o.useEffect)(()=>(r.on("toggle:success",_),()=>{r.off("toggle:success",_)}),[r,_]),s().createElement(s().Fragment,null,c)});c.displayName="Flyout";const d=c},13421:e=>{e.exports={id:"a2b28e971d85820b4a3390c83408a54c932ed6223c1b9796ea71f28950be74c8"}},14977:(e,t,a)=>{"use strict";a.d(t,{J:()=>n});var r=a(85959);const n=({numberOfItems:e,gridRowSize:t,gridItemsRefArray:a,itemsContext:n})=>{const[o,s]=r.useState(0);r.useEffect(()=>{s(0)},[n]);return{focusableIndex:o,handleContainerKeyPress:r=>{if(!a.length)return;let n=null;switch(r.key){case"ArrowLeft":r.preventDefault(),n=Math.max(0,o-1);break;case"ArrowRight":r.preventDefault(),n=Math.min(o+1,e-1);break;case"ArrowUp":r.preventDefault(),n=Math.max(0,o-t);break;case"ArrowDown":r.preventDefault(),n=Math.min(o+t,e-1)}var l,i;null!==n&&(null==a||null==(i=a[n])||null==(l=i.current)||l.focus(),s(n))},setFocusableIndex:s}}},15895:t=>{"use strict";t.exports=e},16473:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var r=a(17502),n=a(85959),o=a.n(n),s=a(21663),l=a(50696),i=a(63939),c=a(3439);const d=["disableContentPreload"],u=e=>{const{disableContentPreload:t=!1}=e,u=(0,r.A)(e,d),[m,p]=(0,n.useState)(()=>()=>o().createElement(o().Fragment,null)),[f,b]=(0,l.D)(i.Ay),g=(0,n.useRef)(),{status:y,bus:_}=f,E=()=>{_.off("open",E),b({status:c.U.OPEN}),a.e(95256).then(a.bind(a,95256)).then(e=>{p(()=>e.default)})},v=()=>{y===c.U.CLOSED&&E()};(0,n.useEffect)(()=>{y===c.U.OPEN&&(_.off("toggle",v),E())},[]),(0,n.useEffect)(()=>(_.on("toggle",v),_.on("open",E),()=>{_.off("toggle",v),_.off("open",E)}),[v,E,_]);const h=e=>{e.timeRemaining()>=25||e.didTimeout?(_.off("toggle",v),_.off("open",E),a.e(95256).then(a.bind(a,95256)).then(e=>{p(()=>e.default)})):("number"==typeof g.current&&(0,s.G)(g.current),g.current=(0,s.B)(h))};return(0,n.useEffect)(()=>(t||(g.current=(0,s.B)(h,{timeout:250})),()=>{t||"number"==typeof g.current&&(0,s.G)(g.current)}),[]),o().createElement(m,u)}},21775:e=>{"use strict";e.exports=t},23515:(e,t,a)=>{"use strict";a.d(t,{o:()=>k});var r=a(85959),n=a.n(r),o=a(30812),s=a.n(o),l=a(43168),i=a(29556),c=a(89575),d=a(17502),u=a(63939),m=a(48430),p=a(16473),f=a(43181),b=a(68551),g=a(64802),y=a(48453);const _=["id","trigger","header","children","footer","aria-label","ariaLabelledBy","ariaDescribedBy","flyoutTriggerProps","flyoutContentProps","flyoutHeaderProps","flyoutBodyProps","flyoutFooterProps","focusManagerProps","preventFocusTransfer"],E=e=>{let{id:t,trigger:a,header:r,children:o,footer:s,"aria-label":l,ariaLabelledBy:i,ariaDescribedBy:E,flyoutTriggerProps:v,flyoutContentProps:h,flyoutHeaderProps:w,flyoutBodyProps:A,flyoutFooterProps:S,focusManagerProps:O,preventFocusTransfer:N=!0}=e,D=(0,d.A)(e,_);const C=n().useId(),k=t||C,B="dialog";return n().createElement(u.Ay,(0,c.A)({preventFocusTransfer:N},D),n().createElement(m.A,(0,c.A)({"aria-haspopup":B,"aria-controls":k},v),a),n().createElement(p.A,(0,c.A)({},h,{id:k,role:B,"aria-modal":!0,"aria-label":l,"aria-labelledby":i,"aria-describedby":E,lockBodyScroll:!0,withBackdrop:!0}),n().createElement(f.A,(0,c.A)({initialFocus:null==h?void 0:h.initialFocusElement},O),r&&n().createElement(b.A,w,r),n().createElement(g.A,A,o),s&&n().createElement(y.A,S,s))))},v=(0,l.X)(i)(E);var h=a(32099),w=a(5073),A=a(38856),S=a(10170),O=a(3906),N=a(58777),D=a(36124),C=a(9049);const k=({ariaLabel:e,initialStatus:t,dialogBus:a,footerComponent:n,closeDialog:o,children:l,onClose:i,isErrorPopup:c=!1,flyoutHeaderProps:d,flyoutBodyProps:u,flyoutFooterProps:m})=>r.createElement(v,{initialStatus:t,onClose:i,"data-testid":"small_action_popup_mobile","aria-label":e,bus:a,trigger:()=>r.createElement(r.Fragment,null),flyoutHeaderProps:d,flyoutBodyProps:u,flyoutFooterProps:m,footer:n},r.createElement("div",{className:s()(w.OL,A.vFE)},r.createElement("div",{className:s()(h.Gm,w.OL,A.Gsz,S.XiK,S.Mw$)},r.createElement(O.A,{"data-testid":"mobile-close-btn",preset:N.lH.transparent,label:"Close",onClick:e=>{e.stopPropagation(),o()}},r.createElement(D.A,{src:C.A,style:{fill:c?"white":"primary"}}))),r.createElement("div",{className:s()({[S.Bmg]:!n})},l)))},23964:e=>{e.exports={id:"fcf8c100264952569f52413d83414f4145aa1674332b0d7a07cc661e5cf4eff4"}},30812:e=>{"use strict";e.exports=a},32740:e=>{"use strict";e.exports=r},38820:e=>{e.exports={id:"436638edb8489703324095890f2c083bd07b99ca6aa9c106d5460f8ebece7f22"}},39333:(e,t,a)=>{"use strict";a.d(t,{z:()=>d});var r=a(85959),n=a(30812),o=a.n(n),s=a(10170),l=a(52130),i=a(2673),c=a(91936);const d=({message:e,preset:t,action:a,Icon:n,timeout:d=3e3})=>r.createElement(c.E,{action:a,timeout:d,ariaLive:e,preset:t},n&&r.createElement(n,{color:l.r7.inverse,fontSize:"custom"}),r.createElement(i.Ay,{className:o()({[s.uB3]:!!n}),color:l.r7.inverse,preset:l.nx.body},e))},39977:e=>{e.exports={id:"99005c09f2cf2ec8155232591295851ae04869d1a2ca47fdda6c5a8bf8fa2cad"}},41927:(e,t,a)=>{"use strict";a.d(t,{d:()=>o});var r=a(85959),n=a(6526);const o=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{if(!e)try{await async function(){(0,n.Z)()&&await a.e(84586).then(a.bind(a,84586))}(),t(!0)}catch{}})()},[e]),{isSegmenterPolyfillReady:e}}},43181:(e,t,a)=>{"use strict";a.d(t,{A:()=>f});var r=a(89575),n=a(85959),o=a.n(n),s=a(50696),l=a(63939),i=a(3439),c=a(30812),d=a.n(c);const u=[({element:e})=>e.hasAttribute("disabled"),({element:e})=>"-1"===e.getAttribute("tabindex"),({element:e,parentElement:t})=>{if("INPUT"===e.tagName&&"radio"===e.type){const a=t.querySelectorAll(`input[type="radio"][name="${e.name}"]`),r=Array.from(a).find(e=>e.checked),n=Array.from(a).at(0)===e;return Boolean(r)?r!==e:!n}return!1},({element:e})=>!e.offsetParent],m=e=>Array.from(e.querySelectorAll("a, button, input, textarea, select, details, [tabindex]")).filter(t=>u.every(a=>!a({element:t,parentElement:e}))),p=({disabled:e=!1,initialFocus:t})=>{const a=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(e||!a.current)return;const r=((e,t)=>{if("string"==typeof t)return e.querySelector(t);if("object"==typeof t&&t.current)return t.current;const a=m(e).at(0);return null!=a?a:null})(a.current,t);r&&r.focus({preventScroll:!0})},[e]),(0,n.useEffect)(()=>{const t=a.current;if(!e&&t){const e=e=>{if("Tab"===e.key){const n=m(t);var a;if(n.at(0)===document.activeElement&&e.shiftKey)e.preventDefault(),null===(a=n.at(-1))||void 0===a||a.focus({preventScroll:!0});var r;if(n.at(-1)===document.activeElement&&!e.shiftKey)e.preventDefault(),null===(r=n.at(0))||void 0===r||r.focus({preventScroll:!0})}};return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}},[e]),{containerRef:a}},f=e=>{const{children:t,initialFocus:a,disable:n,className:c}=e,[u]=(0,s.D)(l.Ay),{containerRef:m}=p({disabled:n||u.status!==i.U.OPEN,initialFocus:a});if(n)return o().createElement(o().Fragment,null,t);const f={tabIndex:-1,ref:m,role:"presentation"};return o().createElement("div",(0,r.A)({className:d()(u.style.focusWrapper,c)},f),t)}},48398:e=>{"use strict";e.exports=n},48430:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var r=a(17502),n=a(75887),o=a(79624),s=a(39389),l=a(50696),i=a(30812),c=a.n(i),d=a(85959),u=a.n(d),m=a(63939),p=a(3439);const f=["bus","status","disableClickTrigger","style","forwardedRef"],b=["onMouseEnter","onMouseLeave","onFocus","onBlur","onClick","onKeyDown","tabIndex","ref","className"],g=["children","forwardedRef","disableClickTrigger"],y=e=>{const{children:t,forwardedRef:a,disableClickTrigger:i=!1}=e,y=(0,r.A)(e,g),[_,E]=(0,l.D)(m.Ay),{bus:v,status:h,triggerRef:w,style:{trigger:A}}=_;(0,d.useEffect)(()=>{h===p.U.OPEN&&setTimeout(()=>v.emit("toggle",{dontTrack:!0}),0)},[]);const S=u().useCallback(()=>{w&&w.blur()},[w]);(0,d.useEffect)(()=>(v.on("trigger:blur",S),()=>{v.off("trigger:blur",S)}),[w,S]);const O=e=>{"function"==typeof a&&a(e),!e||w&&w===e||E({triggerRef:e})};if("function"==typeof t)return t((N=Object.assign({},e,{handleRef:O,bus:v,status:h,style:{triggerStyle:A}}),(e={})=>{const{bus:t,status:a,disableClickTrigger:n=!1,style:{triggerStyle:l}}=N,i=(0,r.A)(N,f),{onClick:d,onKeyDown:u,className:m}=e,g=(0,r.A)(e,b);return Object.assign({"aria-expanded":a===p.U.OPEN,ref:N.handleRef,className:c()(l,m)},!n&&{onClick:(...e)=>{"function"==typeof d&&d(...e),t.emit("toggle")},onKeyDown:(e,...a)=>{"function"==typeof u&&u(e,...a),(0,o.EE)(e,[s.Ks.Enter],[s.Mr.KeyDown])&&t.emit("toggle")}},i,g)}),_);var N;const D=u().Children.only(t);return u().isValidElement(D)?u().cloneElement(D,Object.assign({"aria-expanded":h===p.U.OPEN,ref:O,className:c()(A,D.props.className)},y,!i&&((e,t)=>{const{bus:a}=e;return{onClick:(0,n.E)(t,"onClick",()=>{a.emit("toggle")}),onKeyDown:(0,n.E)(t,"onKeyDown",e=>{(0,o.EE)(e,[s.Ks.Enter],[s.Mr.KeyDown])&&a.emit("toggle")})}})(Object.assign({},e,{bus:v}),D))):null}},48453:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var r=a(89575),n=a(17502),o=a(50696),s=a(30812),l=a.n(s),i=a(85959),c=a.n(i),d=a(63939);const u=["className","children","forwardedRef"],m=e=>{let{className:t,children:a,forwardedRef:s}=e,i=(0,n.A)(e,u);const[m]=(0,o.D)(d.Ay),{style:{footer:p}}=m;return"function"==typeof a?a((e={})=>Object.assign({},e,{className:l()(p,e.className)}),m):c().createElement("div",(0,r.A)({className:l()(p,t),ref:s},i),a)}},50560:(e,t,a)=>{"use strict";a.d(t,{d:()=>E});var r={};a.r(r),a.d(r,{checkbox:()=>m,group:()=>n,groupColumn:()=>l,groupInitial:()=>i,groupInitialText:()=>c,item:()=>o,itemRow:()=>s,label:()=>p,labelWithPrefix:()=>b,labelWithoutPrefix:()=>f,prefix:()=>g,root:()=>d,wrapper:()=>u});var n="_0xLoFW",o="FGFFn7 _2ZBgf",s="_qqKiJ _65i7kZ _2ZBgf _9l1hln DlJ4rT yqrcoC mROyo1",l="_78xIQ-",i="-ZiX0Q _8D09HN _99qBVG q84f1m snL7ze",c="voFjEy _659pDc m3OCL3",d="_cJjor JT3_zV",u="R90p09 _0xLoFW JT3_zV",m="JIenlf Nx0a9q KVKCn3 t0RGt4 _9QaS6n _MmCDa heWLCX rUECvJ",p="L4IQmF voFjEy SbJZ75 m3OCL3 JT3_zV EKabf7 HlZ_Tf JCuRr_ Md_Vex",f="-tFJVL",b="",g="",y=a(43168),_=a(73238);const E=(0,y.X)(r)(_.A);E.displayName="Switch"},63939:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>d});var r=a(59890),n=a(34801),o=a(85959),s=a.n(o),l=a(3439);const i={style:{},status:l.U.CLOSED,value:null},c=(0,n.e)(e=>Object.assign({},i,{bus:new r.l},void 0!==(null==e?void 0:e.defaultValue)?{value:null==e?void 0:e.defaultValue}:{}),e=>{const{styles:t={},bus:a,closeToSwipeDirection:r,preventFocusTransfer:n}=e;return Object.assign({style:t,closeToSwipeDirection:r,preventFocusTransfer:n},void 0!==a?{bus:a}:{})})(e=>{const{defaultValue:t,initialStatus:a,context:{bus:r,setContext:n,value:i},children:c,onOpen:d,onChange:u,onClose:m,onBlur:p,onSubmit:f}=e;(0,o.useEffect)(()=>{void 0===a&&void 0===t||n(Object.assign({},void 0!==t?{value:t}:{},void 0!==a?{status:a}:{})),a===l.U.OPEN&&setTimeout(()=>{r.emit("open",{dontTrack:!0})},0)},[t,r]);const b=(0,o.useCallback)(e=>{"function"==typeof u&&u(e),n({value:e})},[u]),g=(0,o.useCallback)(()=>{"function"==typeof p&&p(i)},[i,p]),y=(0,o.useCallback)(e=>{"function"==typeof f&&f(e),n({value:e})},[f]),_=(0,o.useCallback)(({status:e,dontTrack:t})=>{e===l.U.OPEN?t||"function"!=typeof d||d(i):e!==l.U.CLOSED||t||"function"!=typeof m||m(i)},[i,d,m]);return(0,o.useEffect)(()=>(r.on("change",b),()=>{r.off("change",b)}),[r,b]),(0,o.useEffect)(()=>(r.on("blur",g),()=>{r.off("blur",g)}),[r,g]),(0,o.useEffect)(()=>(r.on("submit",y),()=>{r.off("submit",y)}),[r,y]),(0,o.useEffect)(()=>(r.on("toggle:success",_),()=>{r.off("toggle:success",_)}),[r,_]),s().createElement(s().Fragment,null,c)});c.displayName="Flyout";const d=c},64802:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var r=a(89575),n=a(17502),o=a(50696),s=a(30812),l=a.n(s),i=a(85959),c=a.n(i),d=a(63939);const u=["children","className","forwardedRef"],m=e=>{let{children:t,className:a,forwardedRef:s}=e,i=(0,n.A)(e,u);const[m]=(0,o.D)(d.Ay),{style:{body:p}}=m;return"function"==typeof t?t((e={})=>Object.assign({},e,{className:l()(p,e.className)}),m):c().createElement("div",(0,r.A)({className:l()(p,a),ref:s},i),t)}},66056:(e,t,a)=>{"use strict";a.d(t,{c:()=>n});var r=a(85959);const n=()=>{const e=(0,r.useRef)();return{setTrigger:()=>{e.current=document.activeElement},focusTrigger:t=>()=>{t&&t(),setTimeout(()=>{requestAnimationFrame(()=>{e.current instanceof HTMLElement&&"function"==typeof e.current.focus&&e.current.focus()})},0)}}}},68551:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var r=a(89575),n=a(17502),o=a(50696),s=a(30812),l=a.n(s),i=a(85959),c=a.n(i),d=a(63939);const u=["className","children","forwardedRef"],m=e=>{let{className:t,children:a,forwardedRef:s}=e,i=(0,n.A)(e,u);const[m]=(0,o.D)(d.Ay),{style:{header:p}}=m;return"function"==typeof a?a((e={})=>Object.assign({},e,{className:l()(p,e.className)}),m):c().createElement("div",(0,r.A)({className:l()(p,t),ref:s},i),a)}},76119:e=>{e.exports={id:"1fc07ca1ca52d010c9106e69c72c8c481540e328660db8d7b32533f94e6a22af"}},79830:(e,t,a)=>{"use strict";let r;a.d(t,{Ev:()=>o,dm:()=>n});const n=()=>{var e,t,a,n;return r||((null==(e=window)?void 0:e.BoardWebViewInterface)?(r=window.BoardWebViewInterface,r.sendSignal=(e,t)=>{var a,r;null==(r=window)||null==(a=r.BoardWebViewInterface)||a.onMessageReceived(e,JSON.stringify(t))},r.deviceType="android",r):(null==(n=window)||null==(a=n.webkit)||null==(t=a.messageHandlers)?void 0:t.BoardWebViewInterface)?(r=window.webkit.messageHandlers.BoardWebViewInterface,r.sendSignal=(e,t)=>{var a,r,n,o;null==(o=window)||null==(n=o.webkit)||null==(r=n.messageHandlers)||null==(a=r.BoardWebViewInterface)||a.postMessage(JSON.stringify({event:e,data:t}))},r.deviceType="ios",r):void 0)};var o=function(e){return e.FOLLOW_BOARD="FOLLOW_BOARD",e.UNFOLLOW_BOARD="UNFOLLOW_BOARD",e.SHARE_BOARD="SHARE_BOARD",e.SHARE_ANONYMOUS_BOARD="SHARE_ANONYMOUS_BOARD",e.REPORT_BOARD="REPORT_BOARD",e.CREATE_BOARD="CREATE_BOARD",e.BACK_BUTTON="BACK_BUTTON",e.VIEW_BOARDS="VIEW_BOARDS",e.VIEW_BOARDS_HOME="VIEW_BOARDS_HOME",e.ITEM_ADDED_TO_WISHLIST="ITEM_ADDED_TO_WISHLIST",e.ITEM_REMOVED_FROM_WISHLIST="ITEM_REMOVED_FROM_WISHLIST",e.ITEMS_UPDATED_IN_BOARD="ITEMS_UPDATED_IN_BOARD",e.BOARD_UPDATED="BOARD_UPDATED",e}({})},85959:e=>{"use strict";e.exports=o},86602:(e,t,a)=>{"use strict";a.d(t,{G6:()=>n,NU:()=>r,kq:()=>s,pt:()=>o});const r=10/7,n=500,o=10,s="boardsShareTooltipSeen"},96586:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>pt});var r=a(85959),n=a.n(r),o=a(21775),s=a.n(o),l=a(32740),i=a(40059),c=a(39977),d=a(11367),u=a(23964),m=a(38820);const p="user-board",f=(e,t)=>{const a={name:"select_content",context:{content_id:t,content_group:p,component_name:"pdp_popup",entity_id_path:`entityId:${t}`,event_trigger_name:"add_to_board_button"}};e.trackStandalone(a)},b="info_popup";var g=a(41927),y=a(28258),_=a(30812),E=a.n(_),v=a(5339),h=a(10170),w=a(5073),A=a(38856),S=a(59890),O=a(37983),N=a(2673),D=a(52130),C=a(32099),k=a(68852),B=a(24741),x=a(36124),T=a(76309),I=function(e){return e.ENABLED="ENABLED",e.DISABLED="DISABLED",e}({});const R={minumumLength:3,maximumLength:37,allowedRanges:[[32,126],[160,255],[880,1023],[1024,1279],[8192,8303],[8704,8959],[8352,8399],[128512,128591],[127744,128511],[128640,128767],[128768,128895],[128896,129023],[129024,129279],[129280,129535],[129536,129647],[129648,129791],[9728,9983],[9984,10175],[65024,65039],[126976,127023],[127136,127231],[127232,127487],[127488,127743],[8252,8254],[8265,8269],[8400,8432],[8448,8527],[8592,8703],[8960,9215],[9632,9727],[11008,11263],[917602,917631],[10548,10549],[9410,9410],[12336,12336],[12349,12349],[12951,12951],[12953,12953]]};var L=a(51599),P=a(42768);const F=r.forwardRef((e,t)=>{const{isMobile:a,boardName:n,disabled:o,updateBoardName:s,validationResult:l}=e,{errors:i,length:c}=l,d=function(e){if(e)return e.INVALID_CHARACTERS?__("boards.create.title.unsupported.error"):e.TOO_LONG?__("boards.create.title.charlimit.error"):e.TOO_SHORT?__("boards.create.title.charlimit.short.error"):void 0}(i),u=(null==i?void 0:i.TOO_LONG)||(null==i?void 0:i.TOO_SHORT),m=u?D.r7.inverse:D.r7.secondary,p=u?L.SOo:L.JSK;return r.createElement(r.Fragment,null,r.createElement("style",{dangerouslySetInnerHTML:{__html:"\n  #create-board-input-container > div > div {\n    box-shadow: none !important;\n  }\n\n  #create-board-input-container textarea {\n    line-height: 4rem;\n    font-weight: 700;\n    white-space: normal;\n    padding: 0;\n  }\n\n\n  #create-board-input-container textarea::placeholder  {\n    color: #d0d1d3 !important;\n    line-height: 4rem;\n    font-weight: 700;\n  }\n"}}),r.createElement("div",{className:E()(A.BYH,p),style:{borderRadius:"50px",padding:"3px 6px 6px 6px"}},r.createElement(N.Ay,{color:m,preset:D.nx.bodyExtraSmall},__("boards.create.title.charlimit",c.toString(),R.maximumLength.toString())),r.createElement("span",{className:P.R},__("board.a11y.boardtitlecharlimit.text"))),r.createElement("div",{className:C.Gm,style:{height:300}},r.createElement("div",{id:"create-board-input-container"},r.createElement(k.fs,{ref:t,"data-testid":"board_name_input",tabIndex:0,hideLabel:!0,label:__("boards.create.title.placeholder"),disabled:o,disableResize:!0,id:"create-board-input",name:"create-board-input",className:E()(C.Gm,h.QgQ),style:{height:a?"50vh":280,fontSize:56},value:n,onInput:e=>s(e.target.value),placeholder:__("boards.create.title.placeholder"),message:d?{type:B.G.ERROR,icon:r.createElement(x.A,{src:T.A}),label:d}:void 0}))))});var M=a(13421);const U=({tools:{executeMutation:e},name:t,sharingOnZalando:a,entities:r})=>e({...M,variables:{CreateUserBoardInput:{name:{defaultLanguage:"und",translations:{text:t,language:"und"}},sharingOnZalando:a,entities:r,clientMutationId:`createBoard-${t}`}}});var V=a(39333);function K(e="",t){const a=function(e="",t){const a=e.trim(),r=new Intl.Segmenter(t,{granularity:"grapheme"});return Array.from(r.segment(a)).length}(e,t),r={TOO_SHORT:!1,TOO_LONG:!1,INVALID_CHARACTERS:!1},n=R.allowedRanges;for(const t of e){const e=t.codePointAt(0);if(!n.some(([t,a])=>void 0!==e&&e>=t&&e<=a))return r.INVALID_CHARACTERS=!0,{length:a,isValid:!1,errors:r}}a<R.minumumLength&&(r.TOO_SHORT=!0),a>R.maximumLength&&(r.TOO_LONG=!0);return r.TOO_SHORT||r.TOO_LONG?{length:a,isValid:!1,errors:r}:{length:a,isValid:!0}}var W=a(79830);var H=a(85202),G=a(76349),j=a(73127),$=a(43218),J=a(50560);const z=({isShowSecretBoardToggle:e,isSecretBoard:t,onSecretBoardChange:a,ctaLabel:n,isCtaDisabled:o,isCtaLoading:s,onCtaClicked:l})=>r.createElement("div",{className:E()(w.OL,A.vFE,C.Gm,h.IuV),style:{gap:"var(--spacing-s)"}},e&&r.createElement(J.d,{id:"is-secret-board",label:r.createElement("div",{className:E()(w.OL),style:{gap:"var(--spacing-2xs)"}},r.createElement(x.A,{src:$.A}),__("boards.creation.visibility.toggle.body")),checked:t,onChange:e=>a(e)}),r.createElement(H.j,{type:"button",onClick:e=>{e.stopPropagation(),l()},label:n,style:{width:"100%"},disabled:o,state:s?G.w.LOADING:G.w.INITIAL})),X=({isShowSecretBoardToggle:e,isSecretBoard:t,onSecretBoardChange:a,ctaLabel:n,isCtaDisabled:o,isCtaLoading:s,onCtaClicked:l,onCloseDialog:i})=>r.createElement("div",{className:E()(w.OL,A.sSJ,C.Gm,h.IuV),style:{gap:"var(--spacing-s)"}},r.createElement("div",{className:E()(w.OL,A.FnB),style:{gap:"var(--spacing-2xs)"}},e&&r.createElement(r.Fragment,null,r.createElement(x.A,{src:$.A}),r.createElement(J.d,{id:"is-secret-board",label:__("boards.creation.visibility.toggle.body"),checked:t,onChange:e=>a(e)}))),r.createElement("div",{className:E()(w.OL),style:{gap:"var(--spacing-s)"}},r.createElement(j.t,{type:"button",onClick:e=>{e.stopPropagation(),i()},label:__("boards.create.title.cta.cancel")}),r.createElement(H.j,{type:"button",onClick:e=>{e.stopPropagation(),l()},label:n,style:{width:"auto"},disabled:o,state:s?G.w.LOADING:G.w.INITIAL}))),q=({isMobile:e,...t})=>e?r.createElement(z,t):r.createElement(X,t),Z=r.createContext({isSocialProfileEnabled:!1}),Q=({value:e,children:t})=>r.createElement(Z.Provider,{value:e},t),Y=new S.l,ee=e=>r.createElement(V.z,{message:e,preset:"error"}),te=({tools:e,isEditMode:t,entityId:a,board:n,showDialog:o,isMobile:l,isWebView:c,setShowBoardNameDialog:d,onCloseDialogClick:u,locale:m})=>{const[f,b]=r.useState(!1),g=e.tracking,_=r.useRef(null),{validationResult:S,reset:C,boardNameInput:k,setBoardNameInput:B}=(({locale:e})=>{const[t,a]=(0,r.useState)(""),n=(0,r.useRef)(!1),o=K(t,e),{length:s,errors:l}=o;(0,r.useEffect)(()=>{!n.current&&s>=R.minumumLength&&(n.current=!0)},[s]);const i=function(e,t){if(!e)return;const a={...e};return t&&(a.TOO_SHORT=!1),a}(l,!n.current);return{validationResult:{...o,errors:i},reset:()=>{n.current=!1},boardNameInput:t,setBoardNameInput:a}})({locale:m}),{isSocialProfileEnabled:x}=r.useContext(Z),T=x&&!t,[L,P]=r.useState(!1),M=f||!S.isValid,V=t?__("boards.update.title.header"):__("boards.create.title.header"),H=t?__("boards.update.title.cta"):__("boards.create.title.cta");r.useEffect(()=>{t&&(null==n?void 0:n.name)&&B(n.name)},[t,n]);const G=()=>{Y.emit("close"),u(),t&&(null==n?void 0:n.name)?B(n.name):B(""),C(),d(!1)};r.useEffect(()=>{o?Y.emit("open"):G()},[o]);const j=async t=>{const r=t.trim();b(!0);try{var n;const t=await U({tools:e,name:r,sharingOnZalando:I.DISABLED,entities:a?[a]:[]}),{data:l,errors:i}=t;var o;if((null!=(o=null==l||null==(n=l.createUserBoard)?void 0:n.inputProblems)?o:[]).length||i)y.h.show(ee(__("boards.create.error")));else{var s;const e=null==l||null==(s=l.createUserBoard)?void 0:s.id;((e,t,a)=>{const r={name:"select_content",context:{content_group:p,content_id:a,event_trigger_name:`create_board|||title:${a}`,content_group_detail:`board:${t}|||board_type:user_created|||board_name:${a}`}};e.trackStandalone(r)})(g,e,r),e&&(window.location.href=c?`zalando://BOARDS?id=${e.split(":ucm:")[1]}`:`/your-boards/${e.split(":ucm:")[1]}`)}}catch(e){y.h.show(ee(__("boards.create.error")))}G(),b(!1)},$=async()=>{var t;b(!0);const a=null==n||null==(t=n.entities.nodes)?void 0:t.map(e=>"id"in e?e.id:"");if(!(null==n?void 0:n.id)||!a)return;const r=k.trim();try{var o;const t=await(0,v.A)({tools:e,id:n.id,name:r,entities:a}),{data:c}=t;var l;(null!=(l=null==c||null==(o=c.updateUserBoard)?void 0:o.inputProblems)?l:[]).length||t.errors?y.h.show(ee(__("boards.edit.error"))):((()=>{const e=(0,W.dm)();e&&e.sendSignal(W.Ev.BOARD_UPDATED,null)})(),s().trigger(i.C4),((e,t,a)=>{const r={name:"select_content",context:{content_group:p,component_name:"title_edit",event_trigger_name:`save_title|||title:${a}`,content_group_detail:`board:${t}|||board_type:user_created|||board_name:${a}`}};e.trackStandalone(r)})(g,n.id,r),window.location.href=`/your-boards/${n.id.split(":ucm:")[1]}`)}catch(e){y.h.show(ee(__("boards.edit.error")))}G(),b(!1)};return r.createElement(r.Fragment,null,r.createElement(O.A,{"data-testid":"board_name_popup",bus:Y,flyoutCloseProps:{"aria-label":__("main.close")},flyoutContentProps:{initialFocusElement:_,...l?{style:{backgroundColor:"var(--color-background-tertiary)"}}:{}},...l?{flyoutBodyProps:{style:{borderBottomLeftRadius:"var(--spacing-l)",borderBottomRightRadius:"var(--spacing-l)",borderBottom:"none"}},flyoutFooterProps:{style:{backgroundColor:"var(--color-background-tertiary)",border:"none"}}}:{},onClose:()=>{G(),((e,t,a,r)=>{const n={name:"select_content",context:{content_group:p,component_name:t?"title_edit":"create_title",event_trigger_name:"exit_screen",content_group_detail:t?`board:${a}|||board_type:user_created|||board_name:${r}`:""}};e.trackStandalone(n)})(g,t,null==n?void 0:n.id,null==n?void 0:n.name)},footer:r.createElement(q,{isMobile:l,isShowSecretBoardToggle:T,isSecretBoard:L,onSecretBoardChange:P,ctaLabel:H,isCtaDisabled:M,isCtaLoading:f,onCtaClicked:()=>{t?$():j(k)},onCloseDialog:G}),header:()=>l?r.createElement("label",{htmlFor:"create-board-input"},r.createElement(N.Ay,{preset:D.nx.h5,style:{paddingTop:2},tag:"span"},V)):r.createElement(r.Fragment,null)},r.createElement(r.Fragment,null,r.createElement("div",{className:E()(w.OL,A.vFE,A.rXj)},!l&&r.createElement("label",{htmlFor:"create-board-input",className:E()(h.uvl,h.Ol8)},r.createElement(N.Ay,{color:D.r7.primary,preset:D.nx.h4,tag:"span"},V)),r.createElement(F,{ref:_,isMobile:l,disabled:f,boardName:k,validationResult:S,updateBoardName:B})))))};var ae=a(77393),re=a(43168),ne=a(29556),oe=a(89575),se=a(17502),le=a(12280),ie=a(75887),ce=a(79624),de=a(39389),ue=a(50696),me=a(4906);const pe=["bus","status","disableClickTrigger","style","forwardedRef"],fe=["onMouseEnter","onMouseLeave","onFocus","onBlur","onClick","onKeyDown","tabIndex","ref","className"],be=["children","forwardedRef","disableClickTrigger"],ge=e=>{const{children:t,forwardedRef:a,disableClickTrigger:o=!1}=e,s=(0,se.A)(e,be),[l,i]=(0,ue.D)(le.Ay),{bus:c,status:d,triggerRef:u,style:{trigger:m}}=l;(0,r.useEffect)(()=>{d===me.U.OPEN&&setTimeout(()=>c.emit("toggle",{dontTrack:!0}),0)},[]);const p=n().useCallback(()=>{u&&u.blur()},[u]);(0,r.useEffect)(()=>(c.on("trigger:blur",p),()=>{c.off("trigger:blur",p)}),[u,p]);const f=e=>{"function"==typeof a&&a(e),!e||u&&u===e||i({triggerRef:e})};if("function"==typeof t)return t((b=Object.assign({},e,{handleRef:f,bus:c,status:d,style:{triggerStyle:m}}),(e={})=>{const{bus:t,status:a,disableClickTrigger:r=!1,style:{triggerStyle:n}}=b,o=(0,se.A)(b,pe),{onClick:s,onKeyDown:l,className:i}=e,c=(0,se.A)(e,fe);return Object.assign({"aria-expanded":a===me.U.OPEN,ref:b.handleRef,className:E()(n,i)},!r&&{onClick:(...e)=>{"function"==typeof s&&s(...e),t.emit("toggle")},onKeyDown:(e,...a)=>{"function"==typeof l&&l(e,...a),(0,ce.EE)(e,[de.Ks.Enter],[de.Mr.KeyDown])&&t.emit("toggle")}},o,c)}),l);var b;const g=n().Children.only(t);return n().isValidElement(g)?n().cloneElement(g,Object.assign({"aria-expanded":d===me.U.OPEN,ref:f,className:E()(m,g.props.className)},s,!o&&((e,t)=>{const{bus:a}=e;return{onClick:(0,ie.E)(t,"onClick",()=>{a.emit("toggle")}),onKeyDown:(0,ie.E)(t,"onKeyDown",e=>{(0,ce.EE)(e,[de.Ks.Enter],[de.Mr.KeyDown])&&a.emit("toggle")})}})(Object.assign({},e,{bus:c}),g))):null};var ye=a(21663);const _e=["disableContentPreload"],Ee=e=>{const{disableContentPreload:t=!1}=e,o=(0,se.A)(e,_e),[s,l]=(0,r.useState)(()=>()=>n().createElement(n().Fragment,null)),[i,c]=(0,ue.D)(le.Ay),d=(0,r.useRef)(),{status:u,bus:m}=i,p=()=>{m.off("open",p),c({status:me.U.OPEN}),a.e(23649).then(a.bind(a,23649)).then(e=>{l(()=>e.default)})},f=()=>{u===me.U.CLOSED&&p()};(0,r.useEffect)(()=>{u===me.U.OPEN&&(m.off("toggle",f),p())},[]),(0,r.useEffect)(()=>(m.on("toggle",f),m.on("open",p),()=>{m.off("toggle",f),m.off("open",p)}),[f,p,m]);const b=e=>{e.timeRemaining()>=25||e.didTimeout?(m.off("toggle",f),m.off("open",p),a.e(23649).then(a.bind(a,23649)).then(e=>{l(()=>e.default)})):("number"==typeof d.current&&(0,ye.G)(d.current),d.current=(0,ye.B)(b))};return(0,r.useEffect)(()=>(t||(d.current=(0,ye.B)(b,{timeout:250})),()=>{t||"number"==typeof d.current&&(0,ye.G)(d.current)}),[]),n().createElement(s,o)},ve=[({element:e})=>e.hasAttribute("disabled"),({element:e})=>"-1"===e.getAttribute("tabindex"),({element:e,parentElement:t})=>{if("INPUT"===e.tagName&&"radio"===e.type){const a=t.querySelectorAll(`input[type="radio"][name="${e.name}"]`),r=Array.from(a).find(e=>e.checked),n=Array.from(a).at(0)===e;return Boolean(r)?r!==e:!n}return!1},({element:e})=>!e.offsetParent],he=e=>Array.from(e.querySelectorAll("a, button, input, textarea, select, details, [tabindex]")).filter(t=>ve.every(a=>!a({element:t,parentElement:e}))),we=({disabled:e=!1,initialFocus:t})=>{const a=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(e||!a.current)return;const r=((e,t)=>{if("string"==typeof t)return e.querySelector(t);if("object"==typeof t&&t.current)return t.current;const a=he(e).at(0);return null!=a?a:null})(a.current,t);r&&r.focus({preventScroll:!0})},[e]),(0,r.useEffect)(()=>{const t=a.current;if(!e&&t){const e=e=>{if("Tab"===e.key){const n=he(t);var a;if(n.at(0)===document.activeElement&&e.shiftKey)e.preventDefault(),null===(a=n.at(-1))||void 0===a||a.focus({preventScroll:!0});var r;if(n.at(-1)===document.activeElement&&!e.shiftKey)e.preventDefault(),null===(r=n.at(0))||void 0===r||r.focus({preventScroll:!0})}};return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}},[e]),{containerRef:a}},Ae=e=>{const{children:t,initialFocus:a,disable:r,className:o}=e,[s]=(0,ue.D)(le.Ay),{containerRef:l}=we({disabled:r||s.status!==me.U.OPEN,initialFocus:a});if(r)return n().createElement(n().Fragment,null,t);const i={tabIndex:-1,ref:l,role:"presentation"};return n().createElement("div",(0,oe.A)({className:E()(s.style.focusWrapper,o)},i),t)},Se=["className","children","forwardedRef"],Oe=e=>{let{className:t,children:a,forwardedRef:r}=e,o=(0,se.A)(e,Se);const[s]=(0,ue.D)(le.Ay),{style:{header:l}}=s;return"function"==typeof a?a((e={})=>Object.assign({},e,{className:E()(l,e.className)}),s):n().createElement("div",(0,oe.A)({className:E()(l,t),ref:r},o),a)},Ne=["children","className","forwardedRef"],De=e=>{let{children:t,className:a,forwardedRef:r}=e,o=(0,se.A)(e,Ne);const[s]=(0,ue.D)(le.Ay),{style:{body:l}}=s;return"function"==typeof t?t((e={})=>Object.assign({},e,{className:E()(l,e.className)}),s):n().createElement("div",(0,oe.A)({className:E()(l,a),ref:r},o),t)},Ce=["className","children","forwardedRef"],ke=e=>{let{className:t,children:a,forwardedRef:r}=e,o=(0,se.A)(e,Ce);const[s]=(0,ue.D)(le.Ay),{style:{footer:l}}=s;return"function"==typeof a?a((e={})=>Object.assign({},e,{className:E()(l,e.className)}),s):n().createElement("div",(0,oe.A)({className:E()(l,t),ref:r},o),a)},Be=["id","trigger","header","children","footer","aria-label","ariaLabelledBy","ariaDescribedBy","flyoutTriggerProps","flyoutContentProps","flyoutHeaderProps","flyoutBodyProps","flyoutFooterProps","focusManagerProps","preventFocusTransfer"],xe=e=>{let{id:t,trigger:a,header:r,children:o,footer:s,"aria-label":l,ariaLabelledBy:i,ariaDescribedBy:c,flyoutTriggerProps:d,flyoutContentProps:u,flyoutHeaderProps:m,flyoutBodyProps:p,flyoutFooterProps:f,focusManagerProps:b,preventFocusTransfer:g=!0}=e,y=(0,se.A)(e,Be);const _=n().useId(),E=t||_,v="dialog";return n().createElement(le.Ay,(0,oe.A)({preventFocusTransfer:g},y),n().createElement(ge,(0,oe.A)({"aria-haspopup":v,"aria-controls":E},d),a),n().createElement(Ee,(0,oe.A)({},u,{id:E,role:v,"aria-modal":!0,"aria-label":l,"aria-labelledby":i,"aria-describedby":c,lockBodyScroll:!0,withBackdrop:!0}),n().createElement(Ae,(0,oe.A)({initialFocus:null==u?void 0:u.initialFocusElement},b),r&&n().createElement(Oe,m,r),n().createElement(De,p,o),s&&n().createElement(ke,f,s))))},Te=(0,re.X)(ne)(xe);var Ie=a(14936),Re=a(41825),Le=a(21267);const Pe=r.forwardRef(({tracking:e,board:t,selectedBoards:a,updateSelectedBoards:n,tabIndexValue:o},s)=>{var l;const i=null==(l=t.entities.nodes)?void 0:l.slice(0,3),c=t.entities.totalCount||0,d=(e=>e?e.map(e=>{if("__typename"in e&&"Content"===e.__typename){var t,a;const o=e.variant;var r,n;if("productExtensions"in o&&(null==(a=o.productExtensions)||null==(t=a.gallery)?void 0:t.length))return null==(n=o.productExtensions.gallery[0])||null==(r=n.media)?void 0:r.uri}var o;if("__typename"in e&&"Outfit"===e.__typename)return null==(o=e.primaryImage)?void 0:o.uri}).filter(e=>Boolean(e)):[])(i),u=c>1?__("boards.saved.popup.item.plural",c):__("boards.saved.popup.item.singular",c),m=()=>{n({...a,[t.id]:!a[t.id]}),((e,t,a)=>{const r={name:"select_content",context:{content_group:p,component_name:"pdp_popup",event_trigger_name:`choose_board:${t}`,content_group_detail:`board:${t}|||board_type:user_created|||board_name:${a}`}};e.trackStandalone(r)})(e,t.id,t.name)};return r.createElement(r.Fragment,null,r.createElement("style",{dangerouslySetInnerHTML:{__html:'\n.image {\n  background-color: var(--color-background-tertiary);\n}\n\n.round {\n  position: relative;\n}\n\n.round .tick {\n  background-color: #fff;\n  border: 2px solid black;\n  border-radius: 50%;\n  cursor: pointer;\n  height: 28px;\n  width: 28px;\n  left: -15px;\n  position: absolute;\n  top: 0;\n}\n\n.round .tick:after {\n  border: 2px solid #fff;\n  border-top: none;\n  border-right: none;\n  content: "";\n  height: 6px;\n  left: 6px;\n  opacity: 0;\n  position: absolute;\n  top: 7px;\n  transform: rotate(-45deg);\n  width: 12px;\n}\n\n.round input[type="checkbox"] {\n  visibility: hidden;\n}\n\n.round input[type="checkbox"]:checked + .tick {\n  background-color: black;\n  border-color: black;\n}\n\n.round input[type="checkbox"]:checked + .tick:after {\n  opacity: 1;\n}\n\n/* Dark mode styles */\n@media (prefers-color-scheme: dark) {\n  .image {\n    background-color: var(--color-background-secondary);\n  }\n  .round .tick {\n    background-color: #000;\n    border: 2px solid #fff;\n  }\n  .round .tick:after {\n    border: 2px solid #000;\n    border-top: none;\n    border-right: none;\n  }\n  .round input[type="checkbox"]:checked + .tick {\n    background-color: #fff;\n    border-color: #000;\n  }    \n}\n'}}),r.createElement("div",{role:"checkbox","aria-checked":!!a[t.id],"data-testid":`select-board-${t.id}`,ref:s,tabIndex:o,onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),m())},onClick:m,className:E()(w.OL,A.sSJ,A.FnB,h.LXt,h.vJI),style:{cursor:"pointer"},"aria-label":t.name},r.createElement("div",{className:E()(w.OL,A.FnB)},r.createElement("div",{className:E()(w.OL,h.B4c,A.sSJ,Re.KD),style:{height:60,width:70,background:"rgba(239, 239, 240, 1)"}},r.createElement(Le.A,{className:E()(h.Cos,Re.KD,Ie.Xv,"image"),style:{flex:2},src:d&&d[0],height:48,width:36}),r.createElement("div",{className:E()(w.OL,A.vFE,Ie.Xv,A.HXK),style:{gap:"0.20rem"}},r.createElement(Le.A,{className:E()(Re.KD,A.HXK,"image"),style:{height:26},src:d&&d[1],width:28}),r.createElement(Le.A,{className:E()(Re.KD,A.HXK,"image"),src:d&&d[2],style:{height:26},width:28}))),r.createElement("div",{className:E()(w.OL,A.vFE,h.Ubi),style:{maxWidth:"70%"}},r.createElement(N.Ay,{style:{wordBreak:"break-word"},color:D.r7.primary},t.name),r.createElement(N.Ay,{color:D.r7.secondary},u))),r.createElement("div",{className:"container",style:{marginBottom:15}},r.createElement("div",{className:"round"},r.createElement("input",{type:"checkbox",checked:!!a[t.id],id:t.id,tabIndex:-1,readOnly:!0,"aria-hidden":"true",style:{position:"absolute",opacity:0,pointerEvents:"none",width:0,height:0}}),r.createElement("span",{className:"tick"})))))});var Fe=a(14977),Me=a(9049),Ue=a(3906),Ve=a(58777);const Ke=new S.l,We="close-dialog",He="close",Ge="open",je=({updateBoardsData:e,trackingTools:t})=>{var a;const n=(o=e.length,s=null==(a=e[0])?void 0:a.name,o>1?{message:__("boards.saved.success.message.plural"),ctaLabel:__("boards.saved.success.cta.plural")}:{message:__("boards.saved.success.message.singular",s),ctaLabel:__("boards.saved.success.cta.singular")});var o,s;y.h.show(r.createElement(V.z,{message:n.message,preset:"initial",action:{label:n.ctaLabel,onClick:()=>{if(e.length>1){(e=>{const t={name:"page_view",context:{content_group:"wardrobe",component_name:"pdp_popup",event_trigger_name:"view_boards_tab"}};e.trackStandalone(t)})(t);const e=(0,W.dm)();e&&e.sendSignal(W.Ev.VIEW_BOARDS,null),window.location.href="/wardrobe/lists/boards/"}else{var a;if(e[0])((e,t,a)=>{const r={name:"select_content",context:{content_group:p,component_name:"pdp_popup",event_trigger_name:"view_board",content_group_detail:`board:${t}|||board_type:user_created|||board_name:${a}`}};e.trackStandalone(r)})(t,e[0].id,e[0].name),window.location.href=`/your-boards/${null==(a=e[0])?void 0:a.id.split(":ucm:")[1]}`}}}}))},$e=({trackingTools:e,isMobile:t,closeDialog:a,userBoards:n,selectedBoards:o,setSelectedBoards:s})=>{const l=(i=n,[...i].sort((e,t)=>{const a=new Date(e.modifiedAt).getTime();return new Date(t.modifiedAt).getTime()-a}));var i;const c=r.useRef([]);c.current.length!==n.length&&(c.current=Array.from({length:n.length},(e,t)=>c.current[t]||r.createRef()));const{focusableIndex:d,handleContainerKeyPress:u}=(0,Fe.J)({numberOfItems:n.length,gridRowSize:1,gridItemsRefArray:c.current});return r.createElement("div",{className:E()(w.OL,A.vFE)},t&&r.createElement("div",{className:E()(C.mi,w.OL,A.Gsz,h.XiK,h.Mw$)},r.createElement(Ue.A,{"data-testid":"mobile-close-btn",preset:Ve.lH.transparent,label:"Close",onClick:e=>{e.stopPropagation(),a()}},r.createElement(x.A,{src:Me.A,style:{fill:"black"}}))),r.createElement("div",{className:E()({[h.ZLx]:t,[h.Mn7]:t,[C.mi]:t})},r.createElement(N.Ay,{className:E()(h.uvl,h.rAV,{[h.Ol8]:!t}),color:D.r7.primary,preset:D.nx.h2},__("boards.saved.popup.select")),r.createElement("div",{className:E()(h.WJE,h.TrS),style:{maxHeight:250,overflowY:"scroll",overflowX:"hidden"},onKeyDown:u,role:"grid",tabIndex:-1},l.map((t,a)=>r.createElement(Pe,{tracking:e,key:t.id,board:t,selectedBoards:o,updateSelectedBoards:s,ref:c.current[a],tabIndexValue:d===a?0:-1})))))},Je=({isMobile:e,createNewBoardCTA:t,addToBoardBtnDisabled:a,primaryCtaClicked:n,boardIsSaving:o})=>r.createElement("div",{className:E()(w.OL,A.iTO,e?C.mi:C.Gm,C.Mb,h.IuV,L.GUV,{[A.vFE]:e,[h.g5R]:e}),style:{gap:"15px",paddingLeft:25,paddingRight:25}},r.createElement(j.t,{type:"button",onClick:e=>{e.stopPropagation(),t()},multiline:!0,label:__("boards.saved.popup.create"),style:{width:e?"100%":"",maxWidth:e?"calc(100vw - 50px)":"100%",marginLeft:"auto"}}),r.createElement(H.j,{type:"button",onClick:e=>{e.stopPropagation(),n()},label:__("boards.saved.popup.done"),style:{minWidth:e?"100%":"120px",maxWidth:e?"calc(100vw - 50px)":"100%"},disabled:a,state:o?G.w.LOADING:G.w.INITIAL})),ze=({entityId:e,tools:t,showDialog:a,isMobile:n,boardsWithEntityDetails:o,boardsWithEntityIds:s,setShowSelectDialog:l,createNewBoardCTA:i,refreshUserBoards:c,onCloseDialogClick:d})=>{const[u,m]=r.useState({}),[f,b]=r.useState({}),[g,_]=r.useState(!0),[E,h]=r.useState(!1),w=t.tracking,A=r.useRef(!1),S=()=>{Ke.emit(He)},N=()=>{Ke.emit(We)},D=()=>{A.current=!0,i(),S()};r.useEffect(()=>{a&&Ke.emit(Ge)},[a]),r.useEffect(()=>{const e=()=>{m({}),(e=>{const t={name:"select_content",context:{content_group:p,component_name:"pdp_popup",event_trigger_name:"exit_screen"}};e.trackStandalone(t)})(w);const e=!A.current;d(e),A.current=!1};return Ke.on(We,e),()=>{Ke.off(We,e)}},[A]),r.useEffect(()=>{const t={};s.forEach(a=>{if(a.id){t[a.id]=!1;const r=(({entityId:e,board:t})=>{return t?(null!=(a=t.entities.nodes)?a:[]).some(t=>{if("__typename"in t&&"id"in t)return t.id===e}):null;var a})({entityId:e,board:a});r&&(t[a.id]=!0)}}),m(t),b(t)},[s,e]),r.useEffect(()=>{const e=((e,t)=>Object.entries(e).some(([e,a])=>t[e]!==a))(u,f);_(!e)},[u]);const C=async a=>{const r=(t=>Object.entries(t).reduce((t,a)=>{var r;const n=a[0],o=a[1],l=(({boardId:e,boards:t})=>{var a;const r=t.find(t=>t.id===e);return(null==r||null==(a=r.entities.nodes)?void 0:a.map(e=>"id"in e?e.id:""))||[]})({boardId:n,boards:s}),i=(null==(r=s.find(e=>e.id===n))?void 0:r.name)||"";let c;if(o&&!0!==f[n]?c=[e,...l]:o||!1===f[n]||(c=l.filter(t=>t!==e)),c){const e={id:n,name:i,entities:c};t.push(e)}return t},[]))(a);if(h(!0),!r)return;const n=r.map(a=>(((e,t,a,r)=>{const n={name:"select_content",context:{content_group:p,entity_id_path:`entityId:${t}`,component_name:"pdp_popup",event_trigger_name:`add_to_board:${t}`,content_group_detail:`board:${a}|||board_type:user_created|||board_name:${r}`}};e.trackStandalone(n)})(w,e,a.id,a.name),(0,v.A)({tools:t,id:a.id,name:a.name,entities:a.entities})));(await Promise.allSettled(n)).every(e=>"fulfilled"===e.status)?je({updateBoardsData:r,trackingTools:w}):y.h.show(ee(__("boards.edit.error"))),c(),h(!1),S(),l(!1)};return n?r.createElement(Te,{"data-testid":"select_board_popup_mobile","aria-label":__("boards.saved.popup.select"),bus:Ke,trigger:()=>r.createElement(r.Fragment,null),onClose:N,footer:r.createElement(Je,{isMobile:n,createNewBoardCTA:D,addToBoardBtnDisabled:g||E,primaryCtaClicked:()=>C(u),boardIsSaving:E})},r.createElement($e,{trackingTools:w,isMobile:n,closeDialog:S,userBoards:o,selectedBoards:u,setSelectedBoards:m})):r.createElement(O.A,{size:n?ae.t.FULL_SCREEN:void 0,style:{width:"300px !important"},"data-testid":"select_board_popup_web",bus:Ke,onClose:N,footer:r.createElement(Je,{isMobile:n,createNewBoardCTA:D,addToBoardBtnDisabled:g||E,primaryCtaClicked:()=>C(u),boardIsSaving:E})},r.createElement($e,{trackingTools:w,isMobile:n,closeDialog:S,userBoards:o,selectedBoards:u,setSelectedBoards:m}))},Xe="boards_onboarding-status",qe=[0,7,30],Ze=()=>{const[e,t]=(0,r.useState)(!1),a=(0,r.useRef)((()=>{try{const e=localStorage.getItem(Xe);return e?JSON.parse(e):{views:0,lastShown:null}}catch(e){return{views:0,lastShown:null}}})());return{canShowBoardsInfoPopup:()=>{const{views:e,lastShown:t}=a.current;if(e>=3)return!1;const r=qe[e];return(e=>{if(!e)return 1/0;const t=new Date(e);return((new Date).getTime()-t.getTime())/864e5})(t)>=r},setBoardsInfoPopupVisible:()=>{t(!0);const{views:e}=a.current,r={views:e>=3?3:e+1,lastShown:(new Date).toISOString()};a.current=r,localStorage.setItem(Xe,JSON.stringify(r))},setBoardsInfoPopupNotVisible:()=>{t(!1)},boardsInfoPopupVisible:e}};var Qe=a(93020),Ye=a(52517),et=a(41225),tt=a(23515);const at=new S.l,rt=new S.l,nt="close-dialog",ot="close",st="open",lt=({onCreateBoardClick:e,closeDialog:t,isMobile:a})=>{const r=[A.TA3,h.ZLx,h.Mn7,h.hz5,h.Bmg],o=[A.Gsz];return n().createElement("div",{className:E()(w.OL,C.Gm,a?r:o),style:{gap:a?et.spacingXs:et.spacingS}},n().createElement(j.t,{type:"button",onClick:e=>{e.stopPropagation(),t()},label:__("board.info.popup.close.cta"),style:{...a?{width:"100%"}:{}},multiline:!0}),n().createElement(H.j,{type:"button","aria-haspopup":"dialog",onClick:t=>{t.stopPropagation(),e()},label:__("board.info.popup.create.cta"),style:{...a?{width:"100%"}:{}},multiline:!0}))},it=({isMobile:e})=>{const t={contentWrapper:{gap:e?et.spacingXs:et.spacingL},textWrapper:{gap:e?void 0:et.spacingS}},a=[A.Gsz,A.xLi,h.ZLx,h.Mn7,h.RjM],r=[h.XfK,A.rXj];return n().createElement("div",{className:E()(w.x3,A.vFE,e?a:r),style:t.contentWrapper},n().createElement(Ye.Ay,{alt:`${__("board.info.popup.title")}`,src:"https://img01.ztat.net/cp/boards/boards-onboarding-info-popup-img.png?imwidth=327&filter=transparent"}),n().createElement("div",{className:E()(w.OL,A.vFE,A.rXj),style:t.textWrapper},n().createElement(N.Ay,{color:D.r7.primary,preset:D.nx.h2},__("board.info.popup.title")),n().createElement(N.Ay,{color:D.r7.primary,preset:D.nx.body},__("board.info.popup.description"))))},ct=({showBoardNameDialog:e,onCloseDialogClick:t,isMobile:a,shouldShowDialog:o,trackingTools:s})=>{const l=a?rt:at,i=()=>{l.emit(ot)},c=()=>{l.emit(nt)},d=()=>{e(),i(),function(e){const t={name:"select_content",context:{component_name:b,content_group:p,event_trigger_name:"create_board"}};e.trackStandalone(t)}(s)};return(0,r.useEffect)(()=>{const e=()=>{!function(e){const t={name:"select_content",context:{component_name:b,content_group:p,event_trigger_name:"exit_screen"}};e.trackStandalone(t)}(s),t()};return l.on(nt,e),()=>{l.off(nt,e)}},[l]),(0,r.useEffect)(()=>{o&&(!function(e){const t={name:"page_view",context:{component_name:b,content_group:p,event_trigger_name:"view_info_popup"}};e.trackStandalone(t)}(s),l.emit(st))},[o]),a?n().createElement(tt.o,{ariaLabel:__("board.info.popup.title"),dialogBus:l,closeDialog:i,onClose:c,flyoutFooterProps:{style:{borderTopStyle:"none"},"aria-label":__("label.close")},footerComponent:n().createElement(lt,{isMobile:a,closeDialog:i,onCreateBoardClick:d})},n().createElement(it,{isMobile:a})):n().createElement(Qe.Ay,{flyoutCloseProps:{onClick:i,ariaLabel:__("label.close")},"data-testid":"boards_info-popup",onClose:c,bus:l,footer:n().createElement(lt,{isMobile:a,closeDialog:i,onCreateBoardClick:d})},n().createElement(it,{isMobile:a}))};var dt=a(66056),ut=a(86602);const mt=e=>e?`ern:content::basic-product:${e}`:null,pt=(0,l.tile)().withQueries(e=>{const t=!e.tools.customer.isAnonymous(),a=e.ruleData.isUserBoardCreationEnabled&&e.ruleData.isUserInUserBoardNonHoldoutGroup;return t&&a?{userBoardIdsQuery:{query:u,fetchPolicy:"cache-first"}}:{}}).withProcessDependencies(e=>{var t;const{userBoardIdsQuery:a}=e;if(!a)return{action:"render",data:{hasUserBoards:!1}};var r;return{action:"render",data:{hasUserBoards:!!(null!=(r=null==(t=a.userBoards)?void 0:t.boards)?r:[]).filter(e=>null!==e).map(e=>e.id).length}}}).withRender(({tools:e,context:t,ruleData:a,data:n})=>{const s=e.tracking,l=t.deviceInfo.isMobile,u=t.isWebView,b=t.locale,{hasUserBoards:_}=n,E=!e.customer.isAnonymous(),v=a.isUserBoardCreationEnabled&&a.isUserInUserBoardNonHoldoutGroup,h=E&&v,[w,A]=r.useState([]),[S,O]=r.useState([]),[N,D]=r.useState(""),[C,k]=r.useState(!1),[B,x]=r.useState(null),[T,I]=r.useState(!1),[R,L]=r.useState(!1),{isSegmenterPolyfillReady:P}=(0,g.d)(),{boardsInfoPopupVisible:F,canShowBoardsInfoPopup:M,setBoardsInfoPopupNotVisible:U,setBoardsInfoPopupVisible:K}=Ze(),{focusTrigger:W,setTrigger:H}=(0,dt.c)();r.useEffect(()=>(o.on(i.b4,({sku:e,entityId:t})=>{if(h){H();const a=t||mt(e);if(!a)return;if(D(a),!_&&M())return K();(e=>{y.h.show(r.createElement(V.z,{message:`${__("boards.saved.success","favourites")}`,preset:"initial",action:{label:__("boards.saved.add.cta"),onClick:async()=>{(await G()).length?I(!0):L(!0),f(s,e)}}}))})(a)}}),()=>{o.off(i.b4)}),[_]),r.useEffect(()=>{const e=async({sku:e,entityId:t})=>{if(h){const a=t||mt(e);if(!a)return;D(a);(await G()).length?I(!0):L(!0),f(s,a)}};return o.on(i.Ds,e),()=>{o.off(i.Ds,e)}},[]),r.useEffect(()=>{if(h){const e=async e=>{H(),L(!0),e&&e.boardId&&(k(!0),await j(e.boardId))};return o.on(i.L7,e),()=>{o.off(i.L7,e)}}},[]);const G=async()=>{const t=(e=[])=>e.filter(e=>null!==e),a=async()=>{const a={entityCount:ut.pt},r=await e.executeQuery({...c,variables:a},{fetchPolicy:"network-only"});if(r.data){var n,o,s;const e=null!=(s=null==(o=r.data)||null==(n=o.userBoards)?void 0:n.boards)?s:[];return t(e)}return[]},r=async()=>{const a={entityCount:ut.G6},r=await e.executeQuery({...m,variables:a},{fetchPolicy:"network-only"});if(r.data){var n,o,s;const e=null!=(s=null==(o=r.data)||null==(n=o.userBoards)?void 0:n.boards)?s:[];return t(e)}return[]};try{const[e,t]=await Promise.all([a(),r()]);return O(e),A(t),t}catch(e){return O([]),A([]),[]}},j=async t=>{const a={id:t,entityCount:ut.G6},r=await e.executeQuery({...d,variables:a});if(r.data){const e=r.data.board;e&&x(e)}};return r.createElement(Q,{value:{isSocialProfileEnabled:a.isSocialProfileEnabled}},r.createElement(ze,{tools:e,entityId:N,isMobile:l,showDialog:T,boardsWithEntityDetails:S,boardsWithEntityIds:w,setShowSelectDialog:e=>I(e),createNewBoardCTA:()=>{I(!1),L(!0),((e,t)=>{const a={name:"select_content",context:{content_group:p,entity_id_path:`entity:${t}`,component_name:"create_title",event_trigger_name:"create_board"}};e.trackStandalone(a)})(s,N)},refreshUserBoards:()=>{G(),o.trigger(i.JO),o.trigger(i.C4)},onCloseDialogClick:e=>{if(e){W(()=>I(!1))()}else I(!1)}}),P&&r.createElement(te,{tools:e,isEditMode:C,entityId:N,board:B,isMobile:l,locale:b,showDialog:R,isWebView:u,onCloseDialogClick:W(),setShowBoardNameDialog:L}),r.createElement(ct,{isMobile:l,shouldShowDialog:F,showBoardNameDialog:()=>{U(),L(!0)},onCloseDialogClick:W(U),trackingTools:s}))})}},e=>{var t=t=>e(e.s=t);return e.O(0,[29674],()=>(t(10870),t(96586))),e.O()}]));
//# sourceMappingURL=https://zalando.de/dev/source-maps/collection_board-creation-modal/index-b0d9e3eafe575b688dc6.js.map