define(["z-shop-event-bus","classnames","rendering-engine-api","react"],(e,t,n,a)=>(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[63490],{21775:t=>{"use strict";t.exports=e},30812:e=>{"use strict";e.exports=t},31178:(e,t,n)=>{"use strict";n.r(t),n.d(t,{EVENT_BANNER_CANCEL_LINK:()=>M,EVENT_BANNER_CLICK_LINK:()=>T,default:()=>z});var a=n(32740),o=n(85959),r=n(21775),s=n(65354),i=n(30812),l=n.n(i),c=n(75839),u=n(10170),d=n(2673),m=n(52130),g=n(9049),p=n(36124),h=n(3906),f=n(58777),_=n(24832),b=n(38856),y=n(15184);const E="{#countdown}";function N(e){return e<10?`0${e}`:String(e)}function k(e,t){const n=function(e,t){if(!t)return"";const n=Date.parse(t);if(isNaN(n))return"";const a=Math.max(n-e,0),o=Math.floor(a/1e3);return[Math.floor(o/3600),Math.floor(o/60)%60,o%60].map(N).join(":")}(t,e.publicationEnd);return e.text.replace(E,n)}const S=({onClose:e,onLinkClick:t,onLoad:n,banner:a})=>{o.useEffect(n,[]);const[r,s]=o.useState(Date.now());o.useEffect(()=>{if(a.text.includes(E)){const e=setTimeout(()=>s(Date.now()),1e3);return()=>clearTimeout(e)}});const i=a.text.includes(E)?k(a,r):a.text,N=a.fontColor||"#ffffff";return o.createElement("div",{"data-testid":"information-banner",className:y.yP,style:{background:a.backgroundColor,maxWidth:"100vw"}},o.createElement("div",{className:c.Vg8},o.createElement("div",{className:l()(b.FnB,c.nME)},o.createElement("div",{className:l()(_.Ig,c.nzo,c.Odg,c.FJc,c.YyF,u.LXt,u.vJI)},o.createElement(d.Ay,{tag:"p",preset:m.nx.bodyExtraSmall,font:m.KQ.sansSerif,dangerouslySetInnerHTML:{__html:i.replace("<a href",'<a style="text-decoration:none" href')},style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto",color:N},onClick:e=>{"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),t())}})),a.isCloseable&&o.createElement("div",{style:{paddingRight:0},className:l()(c.nzo,c.iKK,_.Lk)},o.createElement(h.A,{"aria-label":__("main.close"),preset:f.lH.transparent,style:{color:N},label:__("main.close"),onClick:e,type:"button"},o.createElement(p.A,{src:g.A,size:"xs"}))))))};var x=n(89862);function v(e){return{name:x.bD,context:e}}const C="header";function L(e){return t={customCategory:C,customLabel:`infobanner.${e}`},{name:x.n6,context:t};var t}function B(e){return e.split(" ").join("_").toLowerCase()}var w=n(5073),A=n(51599);const I=({track:e})=>o.createElement("div",{"data-testid":"usp-bar",className:l()(A.F9z,w.YW,w.Ll)},o.createElement("div",{className:c.Vg8},o.createElement("div",{className:l()(c.nME,b.FnB),style:{height:"2rem",lineHeight:"2rem"}},o.createElement(d.Ay,{className:l()(c.nzo,c.bNk,_.Ae,A.P6Z),preset:m.nx.bodyExtraSmallBold,color:m.r7.secondary,key:"chat",title:__("header.usp.chat.title"),dangerouslySetInnerHTML:{__html:__("header.usp.chat")},onClick:()=>e(v({customCategory:C,customLabel:"usp.support"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}),o.createElement(d.Ay,{className:l()(c.nzo,c.PwV,_.Ig,A.P6Z),preset:m.nx.bodyExtraSmallBold,color:m.r7.secondary,key:"shipping",title:__("header.usp.shipping.title"),dangerouslySetInnerHTML:{__html:__("header.usp.shipping.AbTest")},onClick:()=>e(v({customCategory:C,customLabel:"usp.shipping"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}),o.createElement(d.Ay,{className:l()(c.nzo,c.Wtj,_.Lk,A.P6Z),preset:m.nx.bodyExtraSmallBold,color:m.r7.secondary,key:"retour",title:__("header.usp.retour.title"),dangerouslySetInnerHTML:{__html:__("header.usp.retour")},onClick:()=>e(v({customCategory:C,customLabel:"usp.returns"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}),o.createElement(d.Ay,{className:l()(c.nzo,c.Wtj,_.Lk,A.P6Z),preset:m.nx.bodyExtraSmallBold,color:m.r7.secondary,key:"giftcards",title:__("header.usp.giftcards.title"),dangerouslySetInnerHTML:{__html:__("header.usp.giftcards")},onClick:()=>e(v({customCategory:C,customLabel:"usp.giftcards"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}})))),T="header:banner:click-link",M="header:banner:cancel-link",z=(0,a.tile)().withQueries(({context:e})=>({data:{query:s,variables:{url:e.navigation.url.href,navigationTargetGroup:e.intent.navigationTargetGroup},doNotBatch:!0}})).withTracking(e=>({resolve:()=>({context:{id:e.entity.id}})})).withProcessDependencies((e,{tools:{cookies:t},ruleData:{hideUspBar:n}})=>{var a;const o=t.get("information_banner_closed")||{},r=null==e||null==(a=e.data)?void 0:a.informationBanner;return{action:"render",data:{informationBanner:r,closedBanners:o,isBannerClosed:!!r&&r.id in o,hideUspBar:n}}}).withRender(({data:{informationBanner:e,isBannerClosed:t,closedBanners:n,hideUspBar:s},tools:{cookies:i,tracking:l},ruleData:c})=>{const[u,d]=o.useState(t),m=l.track;var g;const p=null!=(g=null==e?void 0:e.campaignName)?g:"",h={enableStandaloneInShadow:Boolean(c.enableStandaloneInShadow),enableStandaloneOnly:Boolean(c.enableStandaloneOnly)},f=Object.keys(n).filter(e=>{const t=n[e]||"";return new Date<new Date(t)}).reduce((e,t)=>(e[t]=n[t]||"",e),{});return e&&!u?o.createElement(S,{banner:e,onClose:()=>{(0,a.requestIdleCallback)(()=>{d(!0),(null==e?void 0:e.id)&&(n[e.id]=e.publicationEnd,i.set("information_banner_closed",{...f,[e.id]:e.publicationEnd},365),m(function(e){return v({customCategory:C,customActionSuffix:"close",customLabel:`infobanner.${e}`})}(p),h),l.trackStandalone(function({campaignName:e}){return{name:"select_content",context:{legacy_event_name:x.bD,event_trigger_name:B(`close.infobanner.${e}`)}}}({campaignName:p}),h))})},onLoad:()=>{m(L(p),h),l.trackStandalone(function({campaignName:e}){return{name:"load_content",context:{legacy_event_name:x.Zz,event_trigger_name:B(`infobanner.${e}`)}}}({campaignName:p}),h)},onLinkClick:()=>{r.trigger(T,{banner:e}),m(function(e){return v({customCategory:C,customLabel:`infobanner.${e}`})}(p),{useBeacon:!0,...h}),l.trackStandalone(function({campaignName:e}){return{name:"select_content",context:{legacy_event_name:x.bD,event_trigger_name:B(`click.infobanner.${e}`)}}}({campaignName:p}),h);const t=e.text.match(/<a\s+(?:[^>]*?\s+)?href='([^']*)'/),n=t&&t[1];if(n){let e=!1;r.on(M,()=>{e=!0}),setTimeout(()=>{e||(window.location.href=n)},200)}}}):s?null:o.createElement(I,{track:m})})},32740:e=>{"use strict";e.exports=n},39292:()=>{window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"information-banner":["header.usp.chat.title","header.usp.chat","header.usp.shipping.title","header.usp.shipping.AbTest","header.usp.retour.title","header.usp.retour","header.usp.giftcards.title","header.usp.giftcards","main.close"]}},65354:e=>{e.exports={id:"f46ecf174505f37235c30a995d0adf9dccf7e661712b02f11f609185799a997c"}},85959:e=>{"use strict";e.exports=a}},e=>{var t=t=>e(e.s=t);return e.O(0,[29674],()=>(t(39292),t(31178))),e.O()}]));
//# sourceMappingURL=https://zalando.de/dev/source-maps/information-banner/index-12dc6256326da532ba6c.js.map