define(["@dx/experiments","classnames","rendering-engine-api","react"],(e,t,n,r)=>(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[19724],{4048:e=>{e.exports={id:"4379ab0ce6585117cae2ffa20a295ea994be9ad15c515519fa933948701ac32f"}},15895:t=>{"use strict";t.exports=e},20013:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>be});var r=n(32740),s=n(85959),o=n.n(s),a=n(51599),i=n(38856),l=n(75839),c=n(5010),u=n(41959),m=n(8840),d=n(2673),b=n(52130),p=n(10170),E=n(14410),y=n(30812),f=n.n(y),_=n(77701);const g=(0,s.createContext)({});var v=n(25964),w=n(89862);const S="newsletter subscription banner",N=e=>e?"on":"off";function A({customCategory:e,customLabel:t}){return{name:"view_content",context:{legacy_event_name:w.wc,customCategory:e,customLabel:t}}}function h({customCategory:e,customLabel:t}){return{name:"select_content",context:{legacy_event_name:w.bD,customCategory:e,customLabel:t}}}const k=e=>{e.tracking.trackStandalone(h({customCategory:S,customLabel:"voucher detail"}))},L=e=>{e.tracking.trackStandalone(h({customCategory:S,customLabel:"DOI confirmation resend"}))};function I({isVerificationRequired:e,email:t}){const{tools:n,loyaltyMission:r,customer:o,canCompleteMission:a}=s.useContext(g),i=x(e,t),l=(null==o?void 0:o.email)===t;let c;var u,m;a&&l&&(c=e?s.createElement(v.XL,{amount:null==r||null==(u=r.points)?void 0:u.amount,translations:C()}):s.createElement(v.di,{amount:null==r||null==(m=r.points)?void 0:m.amount,translations:O()}));return s.createElement(v.GN,{text:i,email:t},c,e&&s.createElement(v.Vh,{tools:n,email:t,label:__("subscribe.DOI.success.resend.verification"),referrer:"doi_resend_nl_subscription_banner_one_click",track:L,className:p.Ol8,translations:R()}))}const x=(e,t)=>e?{title:__("subscribe.DOI.success.subtitle"),subtitle:__("subscribe.DOI.success.title"),body:__("subscribe.DOI.success.description",t)}:{title:__("subscribe.SOI.success.subtitle"),subtitle:__("subscribe.SOI.success.title"),body:__("subscribe.SOI.success.description",t)},C=()=>({"loyalty_points.missions.newsletter.doi.consent.points.pending":__("loyalty_points.missions.newsletter.doi.consent.points.pending")}),O=()=>({"loyalty_points.missions.newsletter.premise.points":__("loyalty_points.missions.newsletter.premise.points"),"loyalty_points.missions.newsletter.confirmation.explore":__("loyalty_points.missions.newsletter.confirmation.explore")}),R=()=>({"account.pc.button.success":__("account.pc.button.success"),"account.pc.button.error":__("account.pc.button.error")});var T=n(89581),M=n(76309),D=n(36124),B=n(76349),P=n(85202),V=n(24741),W=n(1263),U=n(78792),F=n(35525);var z=n(4955),G=n(15842);const j=["sk","ee","hu","ro","lt","hr","lv","cz","si","pt"];function K(){const{tools:e,tld:t}=o().useContext(g);if(!j.includes(t))return null;const[n,r]=o().useState(!1);return o().createElement("div",{className:p.QgQ},o().createElement(d.Ay,{tag:"span",preset:b.nx.bodyExtraSmallBold,onClick:()=>{n||k(e),r(e=>!e)},style:{cursor:"pointer"},color:b.r7.secondary},__("newsletter.subscription.footer.disclaimer.voucher")," ",o().createElement($,{up:n})),n&&o().createElement(d.Ay,{tag:"p",preset:b.nx.bodyExtraSmall,color:b.r7.secondary},__("newsletter.subscription.footer.disclaimer")))}const $=({up:e})=>e?o().createElement(D.A,{src:z.A,style:{verticalAlign:"middle",fontSize:12}}):o().createElement(D.A,{src:G.A,style:{verticalAlign:"middle",fontSize:12}});var Q=n(67205);function q({value:e,onChange:t,disabled:n,showError:r=!1}){const s=[{id:"1",label:__("newsletter.subscription.footer.option.women"),value:_.b7.WOMEN},{id:"2",label:__("newsletter.subscription.footer.option.men"),value:_.b7.MEN}];return o().createElement(Q.A,{name:"category",defaultValue:e,disabled:n,onChange:t,options:s,message:r?H(__("subscribe.gender.selection.error")):void 0})}const H=e=>({type:V.G.ERROR,icon:o().createElement(D.A,{src:M.A}),label:e});var X=n(66290),Y=n(28562),J=n(33221),Z=n(24832),ee=n(36093);function te({topics:e,onTopicChange:t,disabled:n,showError:r}){const{tools:s}=o().useContext(g);return o().createElement(X.n,{className:p.aUF,title:__("newsletter.subscription.footer.preferences.more"),ariaLabel:__("newsletter.subscription.footer.preferences.more"),titlePreset:"body",onClick:()=>{(e=>{e.tracking.trackStandalone(h({customCategory:S,customLabel:"content options"}))})(s)}},e.length?o().createElement("div",{className:f()(l.Vg8)},o().createElement("div",{className:l.nME},e.map(e=>o().createElement(Y.A,{id:e.id,key:e.id,disabled:n,className:f()(l.nzo,l.Srn,l.UKO,p.aUF,ee.c1),onChange:n=>t(e,n),label:e.name,checked:e.isEnabled})),r&&o().createElement("div",{className:f()(l.nzo,l.Srn,p.aUF)},o().createElement(d.Ay,{tag:"p",preset:b.nx.bodyExtraSmall,color:b.r7.negative,"aria-live":"polite"},o().createElement(D.A,{src:M.A,fontSize:"custom",className:E.eA,color:"brand"})," ",__("account.pc.preference.error"))),o().createElement("div",{className:f()(l.nzo,l.Srn,Z.w9,p.aUF)},o().createElement(J.A,{href:"/messages",onClick:()=>{(e=>{e.tracking.trackStandalone(h({customCategory:S,customLabel:"see more"}))})(s)}},__("newsletter.subscription.footer.more.info"))))):o().createElement(d.Ay,{preset:b.nx.bodySmall},__("customer.newsletter.subscribe.failed")))}function ne({onSuccess:e}){var t;const{consent:n,customer:r,tools:o,subscriptionReferrer:a,loyaltyMission:i,canCompleteMission:c}=s.useContext(g),[u,m]=s.useState(n.preference.topics.map(e=>({...e,isEnabled:!0}))),[E,y]=s.useState(n.email||(null==r?void 0:r.email)||""),[w,L]=s.useState((null==(t=n.preference)?void 0:t.category)||((I=null==r?void 0:r.gender)===_.YT.FEMALE?_.b7.WOMEN:I===_.YT.MALE?_.b7.MEN:void 0));var I;const[x,C]=s.useState(!1),[O,R]=s.useState(!1),[M,V]=s.useState(!1),[z,G]=s.useState(!1),[j,$]=s.useState(!1),[Q,H]=s.useState(!1),X=async()=>{var t;G(!0),$(!1),H(!1);const n=await o.executeMutation({...F,variables:{input:{email:E,preference:{category:w,topics:u.map(e=>({id:e.id,isEnabled:e.isEnabled}))},referrer:a,clientMutationId:Date.now().toString()}}}),r=null==n||null==(t=n.data)?void 0:t.subscribeToNewsletter;r?(((e,t)=>{e.tracking.trackStandalone(h({customCategory:S,customLabel:t.map(e=>`${e.id} : ${N(e.isEnabled)}`).join(" | ")}))})(o,u),G(!1),$(!0),setTimeout(()=>{$(!1),e(r.email,r.isEmailVerificationRequired)},1500)):(G(!1),H(!0),setTimeout(()=>{H(!1)},1500))},Y=i&&c&&!n.isActive;return s.createElement("div",null,s.createElement("form",{className:p.g5R,onSubmit:e=>{const t=!u.some(e=>e.isEnabled),n=!function(e){var t,n;if(!e)return!1;if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase()))return!1;const r=e.split("@"),s=null==(t=r[0])?void 0:t.length,o=null==(n=r[1])?void 0:n.length;return!(!s||!o)&&s<=64&&o<=255}(E),r=!w;e.preventDefault(),(e=>{e.tracking.trackStandalone(h({customCategory:S,customLabel:"subscribe button"}))})(o),R(!1),V(!1),C(!1),n&&(R(n),(e=>{e.tracking.trackStandalone(A({customCategory:S,customLabel:"invalid email"}))})(o)),t&&(V(t),(e=>{e.tracking.trackStandalone(A({customCategory:S,customLabel:"no preference error"}))})(o)),r&&(C(r),(e=>{e.tracking.trackStandalone(A({customCategory:S,customLabel:"no fashion preference error"}))})(o)),r||n||t||X()}},s.createElement("div",{className:l.Vg8},s.createElement("div",{className:l.nME},s.createElement("div",{className:f()(l.nzo,l.Srn,p.g5R)},s.createElement(W.A,{id:"email-input",label:__("newsletter.subscription.footer.email"),value:E,type:U.M.EMAIL,disabled:z,message:O?re(__("subscribe.error.message")):void 0,onChange:e=>{y(e.target.value)},onFocus:()=>{(e=>{e.tracking.trackStandalone(h({customCategory:S,customLabel:"email form"}))})(o)}})),s.createElement("div",{className:f()(l.nzo,l.Srn,l.UKO)},s.createElement(d.Ay,{tag:"h3",preset:b.nx.bodyBold},__("newsletter.subscription.footer.preferences.headline")),s.createElement(d.Ay,{tag:"p",preset:b.nx.body,font:b.KQ.serif},__("newsletter.subscription.footer.preferences.subheadline"))),s.createElement("div",{className:f()(l.nzo,l.Srn,l.UKO,p.aUF,p.XeA)},s.createElement(q,{value:w,disabled:z,onChange:e=>{const t=e;L(t),((e,t)=>{e.tracking.trackStandalone(h({customCategory:S,customLabel:`${t.toLowerCase()} toggle`}))})(o,(e=>e===_.b7.WOMEN?_.YT.FEMALE:e===_.b7.MEN?_.YT.MALE:void 0)(t))},showError:x})),s.createElement("div",{className:f()(l.nzo,l.Srn)},s.createElement(te,{topics:u,disabled:z,onTopicChange:(e,t)=>{m(u.map(n=>n.id===e.id?{...n,isEnabled:t}:n)),((e,t,n)=>{e.tracking.trackStandalone(h({customCategory:S,customLabel:`${t}.email subscription ${N(n)}`}))})(o,e.name,t)},showError:M})),s.createElement("div",{className:f()(l.nzo,l.Srn,p.Ol8)},Y&&s.createElement("div",{className:p.uvl},s.createElement(v.WJ,{translations:se(),amount:i.points.amount}),s.createElement(d.Ay,{tag:"p",color:b.r7.grey47,preset:b.nx.bodyExtraSmall,className:p.IuD},__("loyalty_points.zhome.missions.newsletter.email"))),s.createElement(P.j,{label:__("newsletter.subscription.footer.cta"),state:z?B.w.LOADING:Q?B.w.ERROR:j?B.w.SUCCESS:B.w.INITIAL,type:"submit",style:{width:"100%"},icon:s.createElement(D.A,{src:T.A})}))))),s.createElement(v.te,{tools:o,track:k,translations:oe()}),s.createElement(K,null))}const re=e=>({type:V.G.ERROR,icon:s.createElement(D.A,{src:M.A}),label:e}),se=()=>({"loyalty_points.missions.newsletter.premise.points":__("loyalty_points.missions.newsletter.premise.points")}),oe=()=>({"new.newsletter.subscription.footer.privacy":__("new.newsletter.subscription.footer.privacy","{0}","{1}"),"link.privacyPolicy":__("link.privacyPolicy"),"link.privacyPolicy.newsletter":__("link.privacyPolicy.newsletter"),"newsletter.subscription.footer.privacy.policy":__("newsletter.subscription.footer.privacy.policy"),"link.faq.unsubscribe":__("link.faq.unsubscribe"),"newsletter.subscription.footer.privacy.unsubscribe":__("newsletter.subscription.footer.privacy.unsubscribe")});function ae({isLagomStage1FontEnabled:e=!1}){const{consent:t,tld:n}=s.useContext(g),[r,o]=s.useState(t.status===_.Q9.SUBSCRIBED_VERIFICATION_NEEDED),[a,i]=s.useState(r),[l,c]=s.useState(r?t.email:"");return s.createElement(le,{tld:n,isLagomStage1FontEnabled:e},!a&&s.createElement(ne,{onSuccess:(e,t)=>{i(!0),c(e),o(t)}}),a&&s.createElement(I,{email:l,isVerificationRequired:r}))}const ie=({tld:e,isLagomStage1FontEnabled:t=!1})=>s.createElement("div",null,s.createElement(d.Ay,{tag:"h2",preset:b.nx.h4},__("newsletter.subscription.footer.title")),s.createElement(d.Ay,{tag:"p",preset:b.nx.h4,font:b.KQ.serif,...!t&&{style:{fontWeight:400}}},__("newsletter.subscription.footer.subtitle")),s.createElement("div",{className:p.aUF},s.createElement(d.Ay,{preset:b.nx.body,font:b.KQ.serif},__("newsletter.subscription.footer.headline",e)))),le=e=>{const t={root:f()(E.mN),contentRow:f()(l.nME,i.Gsz,l.Qcg,p.XfK,l.LQL,l.D0i),contentGrid:l.sm9};return s.createElement(c.Ay,{styles:t,style:{overflowX:"hidden"}},s.createElement(u.A,{className:a.JSK},s.createElement(m.A,null,s.createElement("div",{className:f()(l.nzo,l.W_8,l.Tap,l.UKO,l.NW$,l.Wtb,l.ATT)},s.createElement("div",{className:f()(p.Bmg)},s.createElement(ie,{tld:e.tld,isLagomStage1FontEnabled:e.isLagomStage1FontEnabled}))),s.createElement("div",{className:f()(l.nzo,l.NW$,l.Txi,l.UKO,i.oDB)},s.createElement("div",{className:f()(a.GUV,p.XfK,p.Bmg,p.cgu,p.zRf,p.g6U,p.g5R,p.EVd)},e.children)))))};var ce=n(65470),ue=n(46837),me=n(4048),de=n(50068);const be=(0,r.tile)().withQueries(()=>({consent:{query:ue},customer:{query:ce},loyaltyMission:{query:me},loyaltyProgram:{query:de}})).withTracking(e=>({resolve:()=>({context:{id:e.entity.id}})})).withProcessDependencies(e=>{var t,n,r;const s=null==(t=e.consent)?void 0:t.newsletterConsent,o=e.loyaltyMission.loyaltyPointsMission,a=null==(n=e.loyaltyProgram.loyaltyPointsProgram)?void 0:n.loyaltyStatus,i=o&&((e,t)=>e===_.F2.ACTIVE&&t.status===_.Pw.AVAILABLE)(a,o);return s?{action:"render",data:{customer:null==(r=e.customer)?void 0:r.customer.details,consent:s,canCompleteMission:i,loyaltyMission:o}}:{action:"error",message:"could not fetch NewsletterConsent"}}).withRender(e=>{const t=e.data.customer,n=e.data.consent,o=e.data.canCompleteMission,a=e.data.loyaltyMission,i=e.context.navigation.url.host.split(".").pop(),l=e.ruleData.isStandaloneView;let c="nl_subscription_banner_one_click";if(l){const t=e.context.navigation.url.query.c_ref;c=(Array.isArray(t)?t[0]:t)||"nl_subscription_page"}if(n.isActive&&!l)return null;const u=Boolean(e.ruleData.isLagomStage1FontEnabled);return s.createElement(r.ViewTracker,{onVisible:()=>{e.tools.tracking.trackStandalone(A({customCategory:S,customLabel:"one click banner footer"}))}},s.createElement(g.Provider,{value:{consent:n,customer:t,tld:i,tools:e.tools,subscriptionReferrer:c,canCompleteMission:o,loyaltyMission:a}},s.createElement(ae,{isLagomStage1FontEnabled:u})))})},25964:(e,t,n)=>{"use strict";n.d(t,{WJ:()=>v,di:()=>S,Kw:()=>P,XL:()=>w,te:()=>M,Vh:()=>O,RG:()=>F,GN:()=>E,nl:()=>W,aB:()=>Y});var r=n(77701),s=n(5073),o=n(75839),a=n(2673),i=n(52130),l=n(10170),c=n(30812),u=n.n(c),m=n(85959),d=n.n(m),b=n(36093);function p({maxWidth:e,className:t}){return m.createElement("svg",{width:"128",height:"128",viewBox:"0 0 128 128",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"100%",height:"auto",maxWidth:e},className:t},m.createElement("path",{d:"M6.40039 60.7998V121.6H121.6V60.7998",stroke:"var(--color-text-primary)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M96 76.8002V54.4002C96 52.6329 94.5673 51.2002 92.8 51.2002H64H35.2C33.4327 51.2002 32 52.6329 32 54.4002V74.9884C32 76.1124 32.5898 77.1541 33.5536 77.7324L54.1217 90.0732C60.202 93.7214 67.798 93.7214 73.8783 90.0732L96 76.8002Z",fill:"var(--color-text-interactive)"}),m.createElement("path",{d:"M78.4004 61.3931L60.8004 77.3931L52.8004 69.3931",stroke:"var(--color-text-inverse)",strokeWidth:"3.2",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M121.6 60.7996L74.3375 90.9954C68.0344 95.0223 59.9664 95.0223 53.6633 90.9954L6.40039 60.7996",stroke:"var(--color-text-primary)",strokeWidth:"3.2",strokeLinejoin:"round"}),m.createElement("path",{d:"M121.6 60.8L74.3375 30.6042C68.0344 26.5773 59.9664 26.5773 53.6633 30.6042L6.40039 60.8",stroke:"var(--color-text-primary)",strokeWidth:"3.2",strokeLinejoin:"round"}),m.createElement("path",{d:"M100.8 14.4004L89.5996 25.6004",stroke:"var(--color-text-secondary)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M27.2004 14.4004L38.4004 25.6004",stroke:"var(--color-text-secondary)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M64 3.2002V17.6002",stroke:"var(--color-text-secondary)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round"}))}function E({text:e,email:t,children:n=[]}){return m.createElement("div",{tabIndex:-1,style:{outline:"none"},className:o.Vg8},m.createElement("div",{className:o.nME},m.createElement("div",{className:u()(o.nzo,o.Srn,o.SwH)},m.createElement(p,{maxWidth:128,className:u()(s.lX,s.FH)}),m.createElement(p,{maxWidth:80,className:s.S8})),m.createElement("div",{className:u()(o.nzo,o.Srn,o.WEn,l.aUF,l.XeA)},m.createElement(a.Ay,{tag:"h3",preset:i.nx.h4},e.title),m.createElement(a.Ay,{preset:i.nx.h4,font:i.KQ.serif,style:{fontWeight:400}},e.subtitle),m.createElement("div",{className:l.aUF},m.createElement(a.Ay,{className:u()(b.xB),preset:i.nx.bodyBold,color:i.r7.secondary},t)),m.createElement(a.Ay,{preset:i.nx.body,font:i.KQ.serif,style:{fontWeight:400}},e.body),n&&m.createElement("div",{className:l.Ol8},n))))}var y=n(6249),f=n(96545),_=n(71016);const g=e=>(0,m.useCallback)((t,...n)=>{if(t in e)return e[t]||"";throw new Error(`Translation key ${t} not found`)},[e]);function v({amount:e,translations:t}){const n=g(t);return m.createElement(_.A,{logo:"LoyaltyPointsShortTile",logoLabel:`${e}`,label:n("loyalty_points.missions.newsletter.premise.points"),size:"s"})}function w({amount:e,translations:t}){const n=g(t);return m.createElement(_.A,{logo:"LoyaltyPointsShortTile",logoLabel:e?`${e}`:void 0,label:n("loyalty_points.missions.newsletter.doi.consent.points.pending"),size:"s"})}function S({amount:e,translations:t}){const n=g(t);return m.createElement("div",null,m.createElement(_.A,{logo:"LoyaltyPointsShortTile",logoLabel:e?`${e}`:void 0,label:n("loyalty_points.missions.newsletter.premise.points"),size:"s"}),m.createElement(y.A,{className:l.Ol8,size:f.s.medium,href:"/plus"},n("loyalty_points.missions.newsletter.confirmation.explore")))}var N=n(51599),A=n(56020),h=n(9049),k=n(36124),L=n(25277),I=n(64631),x=n(42768);const C=1500;function O({label:e,email:t,referrer:n,tools:r,track:s,className:o,translations:a}){const[i,l]=m.useState(!1),[c,u]=m.useState(!1),d=g(a),b=()=>{setTimeout(()=>{l(!1),u(!1)},C)};return m.createElement("div",o&&{className:o},m.createElement(L.Q,{size:"small",label:e,onClick:async()=>{var e;s(r);const o=await r.executeMutation({...I,variables:{input:{email:t,referrer:n,clientMutationId:Date.now().toString()}}});(null==o||null==(e=o.data)?void 0:e.resendNewsletterVerificationEmail)?(l(!0),u(!1),b()):(l(!1),u(!0),b())}}),m.createElement("span",{"aria-live":"polite"},i&&m.createElement("span",null,m.createElement("span",{className:x.R},d("account.pc.button.success")),m.createElement(k.A,{src:A.A,color:"custom",className:N.yjt,size:"xs"})),c&&m.createElement("span",null,m.createElement("span",{className:x.R},d("account.pc.button.error")),m.createElement(k.A,{src:h.A,color:"custom",className:N.guH,size:"xs"}))))}var R=n(41225);const T=`\n  .newsletter-legal-link > span{\n    font-size: ${R.typographyBodyExtraSmallFontSize};\n    line-height: ${R.typographyBodyExtraSmallLineHeight};\n    letter-spacing: ${R.typographyBodyExtraSmallLetterSpacing};\n  }\n`;function M({tools:e,track:t,translations:n}){const r=g(n),s=r("new.newsletter.subscription.footer.privacy","{0}","{1}").split(/{(\d+)}/g),o=[d().createElement(y.A,{key:"privacy-policy",className:"newsletter-legal-link",href:r("link.privacyPolicy")+r("link.privacyPolicy.newsletter"),target:"_blank",onClick:()=>{t(e)}},r("newsletter.subscription.footer.privacy.policy")),d().createElement(y.A,{key:"unsubscribe",className:"newsletter-legal-link",href:r("link.faq.unsubscribe"),target:"_blank",onClick:()=>{t(e)}},r("newsletter.subscription.footer.privacy.unsubscribe"))];return d().createElement(a.Ay,{preset:i.nx.bodyExtraSmall,color:i.r7.secondary},d().createElement("style",{dangerouslySetInnerHTML:{__html:T}}),d().createElement("p",null,s.map(e=>{const t=parseInt(e,10);return isNaN(t)?e:o[t]})))}var D=n(76349),B=n(85202);function P({trackPageView:e,trackRetryClick:t,translations:n}){const[r,s]=m.useState(D.w.INITIAL),o=g(n);return m.useEffect(()=>{e()},[]),m.createElement("div",null,m.createElement("div",{className:u()(l.nmT)},m.createElement(a.Ay,{preset:i.nx.h4,font:i.KQ.serif},"Oops"),m.createElement(a.Ay,{tag:"p",preset:i.nx.body,font:i.KQ.serif},o("account.pc.error.message"))),m.createElement(B.j,{style:{maxWidth:200},onClick:()=>{s(D.w.LOADING),t(),setTimeout(()=>{window.location.reload()},2e3)},label:o("unsubscribe.error.unsubscribing.button"),state:r}))}var V=n(28562);function W({onChange:e,topics:t,isSlim:n}){return m.createElement("div",{className:l.Ol8},m.createElement("div",{className:o.nME},t.map(t=>m.createElement("div",{className:u()(o.nzo,o.Srn,o.UKO,b.c1,n?l.uvl:l.nmT),key:t.id},m.createElement(V.A,{id:t.id,onChange:n=>e(t,n),checked:t.isEnabled,label:t.name,"aria-describedby":`topic_${t.id}`}),!n&&m.createElement(a.Ay,{id:`topic_${t.id}`,preset:i.nx.body,tag:"p",className:l.QgQ},t.description)))))}var U=n(67205);function F({value:e,onChange:t,translations:n}){const r=g(n),s=[{id:"1",label:r("subscribe.gender.selection.female"),value:"WOMEN"},{id:"2",label:r("subscribe.gender.selection.male"),value:"MEN"}];return m.createElement("div",null,m.createElement(a.Ay,{preset:i.nx.h4},r("subscribe.gender.selection")),m.createElement("div",{className:u()(l.aUF,l.FOb)},m.createElement(U.A,{name:"category",defaultValue:e,onChange:e=>t(e),options:s})))}var z=n(76309),G=n(73127),j=n(58779),K=n(27801),$=n(32425),Q=n(86562),q=n(36841),H=n(95703);const X={[r.ls.NEWSLETTER_PREFERENCES]:$,[r.ls.NEWSLETTER_UNSUBSCRIPTION]:K};function Y({consent:e,email:t,onUnsubscriptionDone:n,tools:r,isWebView:s,trackPageView:c,trackUnsubscribeClick:d,trackTechnicalErrorView:b,rendererName:p,translations:E}){const[y,f]=m.useState(D.w.INITIAL),[_,v]=m.useState(!1),w=g(E),S=J({tools:r,rendererName:p,consentId:e.id,isWebView:s}),N=(0,H.P)(q.u);return m.createElement("div",null,m.createElement("div",{className:l.uvl},m.createElement(a.Ay,{preset:i.nx.h4},w("customer.newsletterAbo.unsubscribe.title")),m.createElement(a.Ay,{preset:i.nx.body},w("customer.newsletterAbo.unsubscribe.mail",t))),m.createElement("div",{className:o.Srn},_&&m.createElement(j.A,{className:l.uvl,iconColor:"red",icon:m.createElement(k.A,{src:z.A}),label:w("account.pc.error.message")}),m.createElement("div",{className:u()(l.uvl,l.aUF)},m.createElement(G.t,{style:{maxWidth:"100%"},onClick:async()=>{f(D.w.LOADING),d();const[e]=await(0,Q.$)([S()]);e?n(e.newsletterConsent):(v(!0),f(D.w.ERROR),N(()=>f(D.w.INITIAL)),b())},label:w("customer.newsletterAbo.unsubscribe.button"),disabled:D.w.LOADING===y,state:y,icon:m.createElement(k.A,{src:h.A}),"aria-describedby":"unsubscribe-note"})),m.createElement(a.Ay,{id:"unsubscribe-note",preset:i.nx.bodyExtraSmall,color:i.r7.secondary},w("account.pc.save.note"))))}const J=({tools:e,rendererName:t,consentId:n,isWebView:s})=>m.useCallback(async()=>{var o;const a=await e.executeMutation({...X[t],variables:{input:{...!n.includes("default")&&{consentReferenceId:n.replace("ern:nlconsent::","")},referrer:s?r.Gl.APP:r.Gl.WEB,clientMutationId:Date.now().toString()}}});return null==a||null==(o=a.data)?void 0:o.unsubscribeFromNewsletter},[e,t,n,s])},27801:e=>{e.exports={id:"711ef86002306d2e2c3fc2d806e86fc499aa026682575ca53a9d465afbe5f823"}},30812:e=>{"use strict";e.exports=t},32425:e=>{e.exports={id:"e212661f89cca475554ee874d07196e8e716ecd842ec9a620a204ed05567756e"}},32740:e=>{"use strict";e.exports=n},35525:e=>{e.exports={id:"06fe5b50b4218612aa3fa8494df326aef7ff35a75a8563b3455bb53c15168872"}},36841:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});const r=1e3},46837:e=>{e.exports={id:"1e64b010bf06d143966c3d1b697d7cc44599e25f0ab6a431e8ad5380d8b44b19"}},50068:e=>{e.exports={id:"fc2bc4b21f112658dd5cfe8b9c8768a0c3619b80d0d4695599a444b734e36f93"}},64631:e=>{e.exports={id:"adc5fae516e6e40c0c15ab0d2f5a5e3f016968870b83c2bb5d3418bdc614a27c"}},65470:e=>{e.exports={id:"2656033ac133cf1cf1a63c5f0e0572dfaaaa407c382fd04fe90576742173e308"}},77701:(e,t,n)=>{"use strict";n.d(t,{b7:()=>o,YT:()=>c,Pw:()=>r,F2:()=>s,Q9:()=>a,Gl:()=>i,ls:()=>l});var r=function(e){return e.AVAILABLE="AVAILABLE",e.COMPLETED="COMPLETED",e}({}),s=function(e){return e.ELIGIBLE="ELIGIBLE",e.NOT_ELIGIBLE="NOT_ELIGIBLE",e.ACTIVE="ACTIVE",e}({}),o=function(e){return e.MEN="MEN",e.WOMEN="WOMEN",e}({}),a=function(e){return e.NOT_SUBSCRIBED="NOT_SUBSCRIBED",e.UNSUBSCRIBED="UNSUBSCRIBED",e.SUBSCRIBED_VERIFICATION_NOT_NEEDED="SUBSCRIBED_VERIFICATION_NOT_NEEDED",e.SUBSCRIBED_VERIFICATION_NEEDED="SUBSCRIBED_VERIFICATION_NEEDED",e.SUBSCRIBED_VERIFIED="SUBSCRIBED_VERIFIED",e}({}),i=function(e){return e.EMAIL="inbox_preferences_email",e.WEB="inbox_preferences_web",e.APP="nl_preference_center_app",e.DOI_RESEND_WEB="doi_resend_nl_subscription_inbox_preferences",e.DOI_RESEND_APP="doi_resend_nl_preference_center_app",e}({}),l=function(e){return e.NEWSLETTER_UNSUBSCRIPTION="unsubscription",e.NEWSLETTER_PREFERENCES="preferences",e}({}),c=function(e){return e.FEMALE="FEMALE",e.MALE="MALE",e}({})},79958:()=>{window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"newsletter-consent_banner":["newsletter.subscription.footer.title","newsletter.subscription.footer.subtitle","newsletter.subscription.footer.headline","subscribe.DOI.success.resend.verification","subscribe.DOI.success.subtitle","subscribe.DOI.success.title","subscribe.DOI.success.description","subscribe.SOI.success.subtitle","subscribe.SOI.success.title","subscribe.SOI.success.description","loyalty_points.missions.newsletter.doi.consent.points.pending","loyalty_points.missions.newsletter.premise.points","loyalty_points.missions.newsletter.confirmation.explore","account.pc.button.success","account.pc.button.error","newsletter.subscription.footer.email","subscribe.error.message","newsletter.subscription.footer.preferences.headline","newsletter.subscription.footer.preferences.subheadline","loyalty_points.zhome.missions.newsletter.email","newsletter.subscription.footer.cta","new.newsletter.subscription.footer.privacy","link.privacyPolicy","link.privacyPolicy.newsletter","newsletter.subscription.footer.privacy.policy","link.faq.unsubscribe","newsletter.subscription.footer.privacy.unsubscribe","newsletter.subscription.footer.disclaimer.voucher","newsletter.subscription.footer.disclaimer","newsletter.subscription.footer.option.women","newsletter.subscription.footer.option.men","subscribe.gender.selection.error","newsletter.subscription.footer.preferences.more","account.pc.preference.error","newsletter.subscription.footer.more.info","customer.newsletter.subscribe.failed"]}},85959:e=>{"use strict";e.exports=r},86562:(e,t,n)=>{"use strict";n.d(t,{$:()=>r});const r=async e=>{const t=await Promise.all([...e,new Promise(e=>setTimeout(e,1e3))]);return t.pop(),t}},89581:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(85959);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}const a=function(e){var t=e.title,n=e.titleId,a=o(e,["title","titleId"]);return r.createElement("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){s(e,t,n[t])})}return e}({viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor","aria-labelledby":n},a),t?r.createElement("title",{id:n},t):null,r.createElement("path",{d:"M21 3H3a3.004 3.004 0 0 0-3 3v12a3.004 3.004 0 0 0 3 3h18a3.004 3.004 0 0 0 3-3V6a3.004 3.004 0 0 0-3-3m0 1.5c.318 0 .597.122.84.291l-8.816 8.229a1.505 1.505 0 0 1-2.048 0L2.16 4.79c.243-.17.522-.29.84-.291zm0 15H3A1.5 1.5 0 0 1 1.5 18V6.225l8.454 7.89A3 3 0 0 0 12 14.92a3 3 0 0 0 2.046-.804l8.454-7.89V18a1.5 1.5 0 0 1-1.5 1.5"}))}},95703:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});var r=n(85959);const s=e=>{const t=(0,r.useRef)(!1);return(0,r.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),(0,r.useCallback)((n,r)=>{setTimeout(()=>{t.current&&n()},null!=r?r:e)},[])}}},e=>{var t=t=>e(e.s=t);return e.O(0,[29674],()=>(t(79958),t(20013))),e.O()}]));
//# sourceMappingURL=https://zalando.de/dev/source-maps/newsletter-consent_banner/index-50025db9d444b20f39b5.js.map