define(["z-shop-event-bus","classnames","rendering-engine-api","react"],(e,t,n,i)=>(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[28669],{21775:t=>{"use strict";t.exports=e},23452:e=>{e.exports={id:"6dc57fe08d5f93bbaa11b481a93e03e3c3721e01aa81804e563e22cd8860209c"}},30812:e=>{"use strict";e.exports=t},32740:e=>{"use strict";e.exports=n},58409:e=>{e.exports={footer:{id:"footer",url:""},glados:{id:"glados",url:""},miniCartNew:{id:"minicart",url:""},tracking:{id:"tracking",url:""},seo:{id:"seo-header",url:""},"seo-teaser":{id:"seo-teaser",url:""}}},76931:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>R,getLocalEntityId:()=>q,getThemeValue:()=>I});var i=n(10170),o=n(87548),a=n(51599),s=n(22940),r=n(32740),l=n(30812),d=n.n(l),c=n(85959),u=n(23452),p=n(58409),m=n.n(p),h=n(60973),v=n(15184),g=n(22837),f=n(11506),y=n(75839),E=n(61617),x=n(2673),b=n(52130),N=n(5073),_=n(36093);const w=({title:e,subtitle:t,isStatement:n=!1})=>{const o=n?d()(i.Ol8,i.Y8j,i.vJI,i.LXt):i.xpe;return c.createElement("div",{className:d()(y.Vg8,E.ZT)},c.createElement("div",{className:y.nME},c.createElement("div",{className:d()(y.nzo,y.Srn,o)},c.createElement(x.Ay,{preset:b.nx.h1,className:_.c1},e,t&&c.createElement(x.Ay,{className:N.cw,preset:b.nx.h1,tag:"span",font:b.KQ.serif},t)))))};var S=n(89862);const I=e=>e.split(":")[3]||"";let T=!1,k=!1,A=!1;const C="ern:collection:thm:5iCKD5Lyuyb:dGhlbWVzPTVpQ0tENUx5dXli",B=e=>{const{url:{query:{cid:t,sid:n}}}=e.navigation;return{isShare:!!t||!!n,sharedCollection:t||"",sharedShort:n||"",noSharedCollection:!t||!!n,noSharedShort:!n}};const q=e=>{if((null==e?void 0:e.includes("::"))||!(null==e?void 0:e.includes("ern:")))return;const t=e.split(":"),n=t[t.length-1],i=t[3];return e.includes("ern:campaign:cfa")&&t.length>4?i:n},D=e=>{if(!function(e){return"detail"in e}(e))throw new Error("not a custom event");const t=new URLSearchParams(window.location.search);if(e.detail&&t.has("cid")&&t.has("sid")){const e=`${t.get("cid")}__${t.get("sid")}`,n=document.querySelector(`[data-scroll-id="${e}"]`);null==n||n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}},R=(0,r.view)().withFragments(()=>m()).withQueries(e=>({data:{query:u,variables:{id:e.entity.id,...B(e.context),isIndexPage:(0,f.q)(e.context.experience).experienceName.isStatement()}}})).withTracking(e=>{const t=e.entity.id,n=I(t).replace("-","_");return{resolve:()=>({context:{theme:I(t),entity_id:t,experience:e.context.experience}}),getCustomPageViewContext:()=>({legacy_event_name:S.Zz,content_group_detail:n}),getStandaloneGlobalConfigs:()=>{var t;return{content_group_detail:n,experience:(null==(t=e.context.experience)?void 0:t.name)||"DEFAULT"}}}}).withStaticTiles(({context:e})=>({plusExclusivityNotifications:[{type:"entity",hints:["plus-notifications"]}],userBoardCreationModal:[{hints:["user-board-creation"]}],newsletterBanner:[{id:"ern:nlconsent::default",hints:["banner"]}],header:[{type:"navigation"}],appDownloadBanner:[{type:"app-download-banner"}],informationBanner:[{type:"information-banner"}],outfitNotifications:[{type:"outfit-notifications"}],topLevelNavigation:[{type:"top-level-navigation"}],skipButtons:[{hints:["skip-buttons"]}],visibilityInfoModal:[{hints:["visibility-info-modal"]}],...(0,f.q)(e.experience).experienceName.isStatement()?{statementSubscriptionBanner:[{type:"statement-subscription"}]}:{}})).withShell(({fragments:e,tiles:t,context:n})=>({meta:B(n).isShare?void 0:e.seo,pre:c.createElement(c.Fragment,null,t.skipButtons,t.appDownloadBanner,t.informationBanner,t.header),post:c.createElement(c.Fragment,null,e.footer,e.miniCartNew)})).withProcessDependencies((e,t)=>{var n,i,o,a;const{collection:s,newsletterConsent:l}=e.data;if(!s)return{action:"error",message:"No collection data for the Themed Home"};let d=[],c="";const{isCustomPreview:u}=t.context.navigation.url.query,p=(0,f.q)(t.context.experience).experienceName.isStatement()||(e=>{if(!e.theme)return!1;const t=Array.isArray(e.theme)?e.theme[0]:e.theme;return e.isCustomPreview&&!!(null==t?void 0:t.includes(":inspiring-stories:"))})(t.context.navigation.url.query),m=t.entity.id;if(u){let{id:e=[],hints:n=[]}=t.context.navigation.url.query;Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]),e.forEach((e,t)=>{d.push({id:`${e}`,hints:`${n[t]}`.split(",")})})}else if(null!==s.relevantEntities&&null!==s.relevantEntities.edges){const e=s.relevantEntities.edges;d=e.map(e=>{var t;let n,i,o=[];var a,s;(e.node.reason&&"kind"in e.node.reason&&null!==e.node.reason.kind&&o.concat(e.node.reason.kind.split(",")),e.node.reason&&"value"in e.node.reason&&null!==e.node.reason.value&&(o=o.concat(e.node.reason.value.split(","))),"visibility"in e.node&&e.node.visibility&&"visibilityInfo"in e.node.visibility)&&(n=null==(a=e.node.visibility.visibilityInfo)?void 0:a.id);"visibility"in e.node&&"AdvertisingVisibility"===(null==(t=e.node.visibility)?void 0:t.__typename)&&"zmsBidId"in e.node.visibility&&(i=null==(s=e.node.visibility)?void 0:s.zmsBidId);return{id:e.node.id,hints:o,fragmentsData:{visibilityInfoId:n,zmsBidId:i}}})}if(d=d.map((e,t)=>{var n;const i=e.hints||[];if((i.includes("welcome_mat")||i.includes("grid_2")||i.includes("statement-entry-point")||i.includes("statement-carousel"))&&(c=e.id||""),i.includes("carousel")&&p&&(null==(n=e.id)?void 0:n.includes("ern:collection:cnc"))&&(i.push("statement-product-carousel"),i.splice(i.indexOf("carousel"),1)),m===C&&i.push("livestream-hub"),"ern:collection:cfl:4efNLrhq9oamAkt7OgNR1v"===e.id&&i.push("upcoming-livestream-carousel"),"ern:collection:cfl:6HYyzIkjFYa0X5Fhyb8hlc"!==e.id&&"ern:collection:cfl:HY5giguwFquhz7jxWHS08"!==e.id||i.push("recorded-livestream-carousel"),m===C){var o;const e=d[t-1];e&&(null==e||null==(o=e.hints)?void 0:o.some(e=>"ZMS_C_TEXT"===e))&&i.push("no-top-spacing")}return{...e,hints:i}}),!d.length)return{action:"error",message:"No relevant entities returned for the Themed Home"};const h=Math.min(2,d.length-1);let v=d;p&&!((e,t)=>{var n,i;if(e||!(null==t?void 0:t.isActive))return!1;const o=null==t||null==(i=t.preference)||null==(n=i.topics)?void 0:n.find(e=>"stories"===(null==e?void 0:e.id));return!!(null==o?void 0:o.isEnabled)})(t.tools.customer.isAnonymous(),l)&&(v=[...v.slice(0,h),{id:t.entity.id,type:"statement-subscription",hints:["is-index-page"]},...v.slice(h)]);const g={[r.HOMES_TILES_KEY]:v};[0].forEach(e=>{var t,n;null==(n=g.relevantEntities[e])||null==(t=n.hints)||t.push("expectedAboveTheFold")}),c&&g.relevantEntities.push({id:c,hints:["shorts-dialog"]});let y=null==e||null==(n=e.data)?void 0:n.shareShort;var E;!y&&(null==e||null==(i=e.data)?void 0:i.shareCollection)&&(null==(o=e.data.shareCollection.entities)?void 0:o.nodes)&&(y=null==(E=e.data.shareCollection.entities)?void 0:E.nodes[0]);const x={title:(null==y?void 0:y.title)||"",description:(null==y?void 0:y.subtitle)||"",image:(null==y||null==(a=y.primaryImage)?void 0:a.uri)||void 0};return{action:"render",data:{tiles:g,collection:s,isStatementExperience:p,opengraph:x},tiles:g,updatedRenderContext:{theme:I(m)}}}).withMeta(({data:e})=>{const{title:t,description:n,image:i}=e.opengraph;return c.createElement(c.Fragment,null,c.createElement("title",null,`${t} | Zalando`),c.createElement("meta",{property:"og:image",content:i}),c.createElement("meta",{property:"og:title",content:`${t}`}),c.createElement("meta",{property:"og:description",content:`${n}`}))}).withRenderTile(({tileToRender:e,index:t,entity:n})=>{const{id:a,hints:r,type:l}=n,{isDesktop:u,isTablet:p}=e.props.context.deviceInfo;if("app-download-banner"===l)return T=!0,e;if("information-banner"===l)return k=!0,e;if("navigation"===l)return A=!0,e;if("top-level-navigation"===l&&!u)return e;T&&--t,k&&--t,A&&--t;const{ruleData:m}=e.props,h=r.filter(e=>!e.startsWith("octopus:")).includes("navigation"),v="boolean"==typeof m.isSpacingTopNeeded&&m.isSpacingTopNeeded,g=Boolean(m.noTopSpacing)||r.some(e=>"no-top-spacing"===e),y="boolean"==typeof m.isSpacingBottomNeeded&&m.isSpacingBottomNeeded,E=u||p?0:1,x=(0,f.q)(e.props.context.experience).experienceName.isStatement(),b=__("statement.index.headline"),N=!x&&(t>E&&!h||v),_=t===E&&x&&b,w=t>E&&!h&&x&&v,S=()=>c.createElement("div",{"data-entity-id":a,id:q(a),"data-re-hints":r,className:d()({[d()(i.Hm_,i.qUY)]:N&&!g,[d()(i.nlf,i.E0r)]:_,[d()(i.Ol8,i.kU7)]:w,[d()(o.bl$,o.d7k,s.We)]:h,[d()(i.FOb,i.iZw)]:y&&!x,[d()(i.WKz,i.g5R)]:y&&x})},e),[I,C]=c.useState(t>=7?null:S);return c.useEffect(()=>{t>=7&&C(S)},[]),I}).withRender(e=>{const[t,n]=c.useState(!1),{title:i}=e.data.collection,{isDesktop:o,isTablet:s}=e.context.deviceInfo,{isStatementExperience:r}=e.data,l=__("statement.index.headline");return c.useEffect(()=>{n(!0),r&&window.addEventListener("playerIsOpen",D)},[]),c.createElement("div",{"data-uat-pagetype":"themed-home",className:a.GUV},!o&&!s&&e.tiles.topLevelNavigation,c.createElement("main",{className:d()({[(0,v.dl)(g.z.monochromeDark)]:r},a.GUV),id:"main-content"},c.createElement("div",{id:"themed-homes-pagemon",className:d()({"is-loaded":t,[(0,v.dl)(g.z.monochromeDark)]:r})},r&&l&&c.createElement(w,{title:l,subtitle:__("statement.index.subheadline"),isStatement:r}),e.tiles.relevantEntities,i&&!r&&c.createElement(w,{title:i}))),e.fragments["seo-teaser"],!r&&e.fragments.glados,e.tiles.newsletterBanner,e.fragments.tracking,e.tiles.outfitNotifications,e.tiles.plusExclusivityNotifications,e.tiles.visibilityInfoModal,e.tiles.userBoardCreationModal,c.createElement(h.s,null))})},81663:()=>{window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"collection_themed-home-view":["statement.index.headline","statement.index.subheadline"]}},85959:e=>{"use strict";e.exports=i}},e=>{var t=t=>e(e.s=t);return e.O(0,[29674],()=>(t(81663),t(76931))),e.O()}]));
//# sourceMappingURL=https://zalando.de/dev/source-maps/collection_themed-home-view/index-6cea2970e0c721ab157e.js.map