define(["z-shop-event-bus","classnames","rendering-engine-api","react"],(e,t,n,a)=>(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[70368],{4990:e=>{e.exports={id:"2d70341e784cb505bd1b69427fb3c22cddbcf9a40034e82656ad1af0bb24c82c"}},21775:t=>{"use strict";t.exports=e},30812:e=>{"use strict";e.exports=t},32740:e=>{"use strict";e.exports=n},38608:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var a=function(e){return e.GRANT_CONSENT="/plus/consent",e}({})},53173:(e,t,n)=>{"use strict";n.d(t,{j:()=>S});var a=n(85959),r=n(30812),l=n.n(r),o=n(5073),i=n(51599),c=n(10170),s=n(38856),d=n(2673),u=n(52130),m=n(52517);const E={day:"numeric",month:"long",year:"numeric"},v={hour:"numeric",minute:"numeric",hour12:!1},g=(e,t,n)=>{const a=/\[(.*?)\]/g;let r=a.exec(e);const l=new Array;for(;null!=r;)l.push({exactMatch:r[0]||"",placeholder:r[1]||"",index:r.index}),r=a.exec(e);if(0===l.length)return;const o=l.find(e=>e.placeholder.toLowerCase()==="Date".toLowerCase());if(!o)return;e=e.replace(o.exactMatch,t.date);const i=l.find(e=>e.placeholder.toLowerCase()==="Time".toLowerCase());return i&&(e=e.replace(i.exactMatch,null!=n?n:t.time)),e},y=({text:e,releaseDate:t})=>{const[n,r]=a.useState(g(e,t,""));return a.useEffect(()=>{r(g(e,t))},[]),a.createElement("span",null,n)},p=({text:e,releaseDate:t})=>{const n=t&&a.createElement(y,{text:e,releaseDate:t});return a.createElement(d.Ay,{preset:u.nx.body,color:u.r7.primary,font:u.KQ.serif},n||e)};var x=n(42768),f=n(85202),T=n(73127);const N=({cta:e,ctaType:t,onClick:n})=>{const r=()=>{n()};return e.text?"PRIMARY"===t?a.createElement(f.j,{className:x.$3,label:e.text,onClick:r,href:e.uri,multiline:!0}):a.createElement(T.t,{className:x.$3,label:e.text,onClick:r,href:e.uri,multiline:!0}):null};var h=n(10774),b=n(36124),L=n(55124);const A=({cta:e,onClick:t,tools:n})=>e.text?a.createElement(h.J,{size:"medium",onClick:()=>{t(),n.customer.performLogin({})},className:i.zBe,suffixIcon:a.createElement(b.A,{src:L.A}),label:e.text,href:"#"}):null,S=({title:e,header:t,releaseDate:n,locale:r,description:g,cta:y,ctaType:x,footer:f,showFooterCta:T,onCtaClick:h,onFooterCtaClick:b,tools:L})=>{var S;const _=void 0!==n?((e,t)=>{if(!e)return;const n=new Date(e);return{date:n.toLocaleString(t,E),divider:"@",time:n.toLocaleString(t,v).toLocaleLowerCase(t)}})(n,r):void 0;var C;return a.createElement("div",{className:l()(o.OL,i.JSK,c.cgu,s.vFE)},t&&a.createElement("div",{className:l()(o.OL,s.FnB)},(null==t?void 0:t.logo)&&a.createElement(m.Ay,{alt:null!=(C=t.logo.alternativeText)?C:"",src:t.logo.uri,width:t.logo.width,className:c.HaJ}),a.createElement(d.Ay,{preset:u.nx.bodyLarge,tag:"h2"},t.label)),a.createElement("div",{className:l()(c.aUF)},a.createElement(d.Ay,{preset:u.nx.bodyBold,tag:"p"},e)),g&&a.createElement("div",{className:l()(c.E0r)},a.createElement(p,{text:g,releaseDate:_})),y&&a.createElement("div",{className:l()(c.aUF)},a.createElement(N,{ctaType:x,cta:y,onClick:h})),T&&(null==f||null==(S=f.cta)?void 0:S.uri)&&a.createElement("div",{className:l()(c.aUF)},a.createElement(d.Ay,{preset:u.nx.bodySmall},f.text)," ",f.cta&&a.createElement(A,{cta:f.cta,onClick:b,tools:L})))}},57235:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>j});var a=n(85959),r=n(29443),l=n(11506),o=n(32740),i=n(10170),c=n(53173),s=n(89862),d=function(e){return e.PDP_TRACKING_CATEGORY="product detail page",e.LOYALTY_EVENT_TRIGGER_NAME="loyalty_opt_in_placement.priority_access",e.LOYALTY_EVENT_BONUS_POINTS_TRIGGER_NAME="loyalty_bonus_points_banner",e}({}),u=function(e){return e.VIEW_CONTENT="view_content",e.SELECT_CONTENT="select_content",e}({});const m=(e,t,n)=>({content_id:e,legacy_event_name:t,event_trigger_name:n}),E=(e,t,n)=>{e.track({name:s.bD,context:{customCategory:d.PDP_TRACKING_CATEGORY,customActionSuffix:"banner",customLabel:`${t}.cta.${n}`}})},v=({banner:e,inStock:t,locale:n,tools:r})=>{const l=(e=>{var t,n,a,r,l,o,i,c,s,d,u,m,E,v,g,y;return{header:e.header?{label:null!=(d=null==e||null==(t=e.header)?void 0:t.label)?d:void 0,logo:{width:null!=(u=null==e||null==(a=e.header)||null==(n=a.logo)?void 0:n.width)?u:void 0,uri:null!=(m=null==e||null==(l=e.header)||null==(r=l.logo)?void 0:r.uri)?m:void 0,alternativeText:null!=(E=null==e||null==(i=e.header)||null==(o=i.logo)?void 0:o.alternativeText)?E:void 0}}:void 0,title:null!=(v=e.title)?v:void 0,description:null!=(g=e.description)?g:void 0,releaseDate:null!=(y=e.releaseDate)?y:void 0,cta:(null==e?void 0:e.cta)?{text:e.cta.text,uri:e.cta.uri}:void 0,footer:{text:(null==e||null==(c=e.footer)?void 0:c.text)?e.footer.text:void 0,cta:(null==e||null==(s=e.footer)?void 0:s.cta)?{text:e.footer.cta.text,uri:e.footer.cta.uri}:void 0}}})(e),[o,i]=a.useState(l.cta);a.useEffect(()=>{o&&i({...o,uri:o.uri?`${o.uri.replace(/\/+$/,"")}/?redirect_url=${encodeURIComponent(window.location.href)}`:void 0})},[]);const s=t?"PRIMARY":"SECONDARY";return a.createElement(c.j,{...l,locale:n,cta:o,onCtaClick:()=>{E(r.tracking,e.id,"button")},onFooterCtaClick:()=>{E(r.tracking,e.id,"link")},ctaType:s,showFooterCta:!0,tools:r})};var g=n(30812),y=n.n(g),p=n(51599),x=n(5073),f=n(38856),T=n(2673),N=n(52130),h=n(22837),b=n(15184),L=n(4821),A=n(41825);const S={hour:"numeric",minute:"numeric",hour12:!1},_={dateFormatOptions:{day:"numeric",month:"long",year:"numeric"},dateTimeDivider:" @ ",timeFormatOptions:S},C={..._,dateTimeDivider:" um "},k={..._,dateTimeDivider:" à "},O={..._,dateTimeDivider:" alle "},R={"de-DE":C,"en-GB":{..._,timeFormatOptions:{...S,hour12:void 0,hourCycle:"h12"}},"fr-FR":k,"nl-NL":{..._},"it-IT":O,"de-CH":C,"fr-CH":k,"it-CH":O,"de-AT":C,"fr-BE":k,"fr-LU":k},P=(e,t)=>{if(!e)return null;const n=new Date(e);var a;const{dateFormatOptions:r,dateTimeDivider:l,timeFormatOptions:o}=null!=(a=R[t])?a:_;return{date:n.toLocaleString(t,r),divider:l,time:n.toLocaleString(t,o).toLocaleLowerCase(t)}},D=e=>{var t;const n=null==(t=e.split("?"))?void 0:t[1];return new URLSearchParams(n).get("context")},w=({locale:e,releaseDate:t})=>{const n=P(t,e),[r,l]=a.useState((null==n?void 0:n.date)||"");return a.useEffect(()=>{const n=P(t,e),a=`${null==n?void 0:n.date} ${null==n?void 0:n.divider} ${null==n?void 0:n.time}`;l(n?a:r)},[]),a.createElement("span",null,r)};const I=({locale:e,banner:t,isDesignerExperience:n,isLagomStage1BorderRadiusEnabled:r})=>{const l=a.useContext(b.ix),o=function(e){return[h.z.dark,h.z.monochromeDark].includes(e)?e:h.z.monochromeLight}(l),c=l===h.z.inherit?h.z.default:l,s=null==t?void 0:t.title,d=null==t?void 0:t.description,u=null==t?void 0:t.releaseDate;return a.createElement(b.Sv,{colorScheme:o},a.createElement("div",{className:y()(x.OL,i.cgu,f.vFE,p.JSK,r&&A.xG)},a.createElement("div",{className:y()(x.OL,f.FnB)},a.createElement(b.Sv,{colorScheme:c},a.createElement(L.A,{logo:"LoyaltyPoints",size:"s"}))),s&&a.createElement("div",{className:y()(i.aUF,i.Cou)},a.createElement(T.Ay,{preset:n?N.nx.h4:N.nx.bodyLargeBold,tag:"p"},s)),d&&a.createElement(T.Ay,{preset:N.nx.body},d),u&&a.createElement(T.Ay,{preset:N.nx.bodyBold},a.createElement(w,{locale:e,releaseDate:u}))))};var B=n(21775),F=n(42768),Y=n(85202),G=n(87923),z=n(96545),$=n(36124),U=n(61617),M=n(3090),V=n(38608),K=n(55124);const J=({locale:e,banner:t,loyaltyPointsProgram:n,isDesignerExperience:r,tracking:l,entityId:o,isLagomStage1BorderRadiusEnabled:c})=>{const E=a.useContext(b.ix),v=function(e,t){return[h.z.dark,h.z.monochromeDark].includes(e)?e:t?h.z.monochromeLight:h.z.monochromeDark}(E,r),g=E===h.z.inherit?h.z.default:E,{header:S,title:_,description:C,cta:k,footer:O}=t,{icon:R,tier:w}=null!=n?n:{},I=P(null==t?void 0:t.releaseDate,e),J=r?[A.FQ,A.Ae,A.Nd,A.s7,A.$A,A.e6,A.b_,A.Ku]:[A.Ih,A.NB,p.sS9],H=e=>{e&&(e.startsWith(V.b.GRANT_CONSENT)?(((e,t)=>{const n={name:u.SELECT_CONTENT,context:m(t,s.bD,d.LOYALTY_EVENT_TRIGGER_NAME)};e.trackStandalone(n)})(l,o),B.trigger(M.Hi.OPEN,{context:D(e)})):window.location.href=e)};return a.createElement(b.Sv,{colorScheme:v},a.createElement("div",{className:y()(x.OL,i.cgu,f.vFE,p.GUV,...J,c&&A.xG)},S?a.createElement("div",{className:y()(x.OL,f.FnB)},a.createElement(b.Sv,{colorScheme:g},a.createElement(L.A,{logo:"LoyaltyPointsTile",logoLabel:null==w?void 0:w.name,icon:R,size:"s"})),S.label&&a.createElement(T.Ay,{className:y()(i.dwx,U.ZT),preset:N.nx.bodySmall},S.label)):null,_?a.createElement("div",{className:i.aUF},a.createElement(T.Ay,{preset:N.nx.bodyBold,tag:"p"},_)):null,C?a.createElement("div",{className:i.E0r},a.createElement(T.Ay,{preset:N.nx.body},C)):null,I?a.createElement(T.Ay,{preset:N.nx.bodyBold},`${null==I?void 0:I.date} ${null==I?void 0:I.divider} ${null==I?void 0:I.time}`):null,k?a.createElement("div",{className:y()(i.aUF)},a.createElement(Y.j,{className:y()(F.$3),label:k.text,onClick:()=>H(null==k?void 0:k.uri)})):null,O?a.createElement("div",{className:i.aUF},a.createElement(T.Ay,{preset:N.nx.bodySmall},O.text),O.cta?a.createElement(a.Fragment,null,a.createElement(G.A,{size:z.s.medium,linkStyle:"navigational",onClick:()=>{var e;return H(null==O||null==(e=O.cta)?void 0:e.uri)},style:{cursor:"pointer"}},O.cta.text)," ",a.createElement($.A,{src:K.A,fontSize:"custom"})):null):null))};var H=n(4990),W=n.n(H);const j=(0,o.tile)().withQueries(({entity:e})=>({data:{query:W(),variables:{id:e.id}}})).withTracking(e=>({def:r.def,context:{id:e.entity.id}})).withProcessDependencies((e,t)=>{if(!e||!e.data)return{action:"error",message:"Invalid product"};const{product:n,loyaltyPointsProgram:a}=e.data;if(!n)return{action:"error",message:"Invalid product"};return{action:"render",data:{product:n,loyaltyPointsProgram:a,isLagomStage1BorderRadiusEnabled:!!t.ruleData.isLagomStage1BorderRadiusEnabled}}}).withRender(({context:{experience:e,locale:t},data:n,entity:r,tools:c})=>{const{product:E,loyaltyPointsProgram:g,isLagomStage1BorderRadiusEnabled:y}=n,{segmentCommunication:p,inStock:x}=E;if(!p)return null;const f=["LOYALTY_POINTS_EARLY_ACCESS","LOYALTY_POINTS_PRIORITY_ACCESS"].includes(null==p?void 0:p.kind),T="LOYALTY_POINTS_BONUS_POINTS"===(null==p?void 0:p.kind),{experienceName:N}=(0,l.q)(e),h=N.isDesigner(),b=r.id;return a.createElement(o.ViewTracker,{onVisible:()=>(({tracking:e,bannerId:t,entityId:n,isLoyaltyPointsBanner:a,isLoyaltyPointsBonusPointsBanner:r})=>{let l="";a?l=d.LOYALTY_EVENT_TRIGGER_NAME:r&&(l=d.LOYALTY_EVENT_BONUS_POINTS_TRIGGER_NAME);const o={name:u.VIEW_CONTENT,context:m(n,s.wc,l)};e.trackStandalone(o),e.track({name:s.wc,context:{customCategory:d.PDP_TRACKING_CATEGORY,customActionSuffix:"banner",customLabel:t}})})({tracking:null==c?void 0:c.tracking,bannerId:null==p?void 0:p.id,entityId:b,isLoyaltyPointsBanner:f,isLoyaltyPointsBonusPointsBanner:T})},a.createElement("div",{className:i.hkP},f?a.createElement(J,{locale:t,banner:p,loyaltyPointsProgram:g,isDesignerExperience:h,tracking:c.tracking,entityId:b,isLagomStage1BorderRadiusEnabled:y}):T?a.createElement(I,{locale:t,banner:p,isDesignerExperience:h,isLagomStage1BorderRadiusEnabled:y}):a.createElement(v,{banner:p,inStock:x,locale:t,tools:c})))})},85959:e=>{"use strict";e.exports=a},87923:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(89575),r=n(17502),l=n(85959),o=n(6249),i=n(71156),c=n(54987),s=n(32501);const d=["linkStyle"],u=l.forwardRef((e,t)=>{let{linkStyle:n}=e,u=(0,r.A)(e,d);switch(n){case"navigational":return l.createElement(c.q,(0,a.A)({},u,{forwardedRef:t}));case"navigational-sale":return l.createElement(s.T,(0,a.A)({},u,{forwardedRef:t}));case"icon":return l.createElement(i.g,(0,a.A)({},u,{forwardedRef:t}));default:return l.createElement(o.Y,(0,a.A)({},u,{forwardedRef:t}))}})}},e=>(e.O(0,[29674],()=>{return t=57235,e(e.s=t);var t}),e.O())]));
//# sourceMappingURL=https://zalando.de/dev/source-maps/product_segmented-banner/index-44134ee0ad4e55b6efeb.js.map